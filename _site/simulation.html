<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Simulating An RM Study</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Timothy S. Carsel</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="simulation.html">Simulating An RM Study</a>
</li>
<li>
  <a href="dissertation.html">Contextual Trust Study</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Simulating An RM Study</h1>

</div>


<div style="page-break-after: always;"></div>
<p>Statistical power is a tricky and occasionally confusing thing. Defined as the probability of rejecting a false null hypothesis, statistical power is a function of the size of the effect of interest, the size of the sample, and the alpha cut-off.</p>
<p>For simple designs, such as a <em>t</em>-test, determining the power of a study is relatively straightforward: Identify the area of the comparison distribution that lies beyond the cut-point defined by alpha. However, for more complicated designs, like those involving repeated measures, determining the power of a study is much more convoluted. Oftentimes, it is necessary to repeatedly simulate the expected results of the study under a variety of conditions.</p>
<p>Below, I walk you through the simulations and power analyses for my dissertation.</p>
<div id="setting-the-initial-values" class="section level1">
<h1>Setting the Initial Values</h1>
<p>For our simulations, we will need to create a sample of generated data. Think of these as computer people who will act in the way we tell them to. These values stay the same throughout all of the simulations except where explicitly mentioned.</p>
<pre class="r"><code>########################################################
# Setting the seed so this is the same everytime       #
set.seed(10101)                                        #
# Setting the number of subjects to be 5k              #
n1=5000 # Make an even number                          #
# Creating a subject ID number                         #                 
Subject1 = rep(1:n1)                                   #
# Creating the number of repeated measures             #
Sessions1 = rep(1:6)                                   #
# Creates RM design                                    # 
X1 &lt;- expand.grid(Sessions=Sessions1,Subject=Subject1) #
# Add covariate                                        #
impcat&lt;-rep(c(-.5,.5),n1)                              #
X2&lt;-data.frame(impcat=impcat,X1)                       #
# Setting extremely weak relationships                 #
b1 &lt;- c(0,0,.05,-.05,.1,-.15)                          #
########################################################</code></pre>
<ul>
<li>In the code above, we created a sample of 5000 subjects (Ss) who each have 6 measurements of the criterion variable.</li>
<li>Then, we added a between-subjects covariate. In the case of my dissertation, I included a categorical measure of goal importance (Most Important, Least Important) to include in the random structure of the multilevel model.</li>
<li>Finally, I initialized the beta values for my eventual model, starting with the intercept, moving through the main effects, and ending with two, two-way interactions.</li>
</ul>
<p>As you can see, other than the last interaction, I set my expected betas to be pretty weak. This allowed me to have a conservative estimate of a priori power.</p>
<div id="first-set-of-simulations-varying-the-covariance-between-predictors" class="section level2">
<h2>First Set of Simulations: Varying the covariance between predictors</h2>
<p>The degree to which a set of predictors covary affects your ability to reject a false null hypothesis (i.e., it affects your power). In these first three simulations, I am going to change the correlation among my predictors in a principled way and observe how that affects my power.</p>
</div>
</div>
<div id="simulation-1" class="section level1">
<h1>Simulation 1</h1>
<p>In this first simulation, I will set the correlation between the relevance of the best friend’s strength to the goal (hereafter referred to as relevance of strength) and the relevance of the best friend’s weakness to the goal (heareafter referred to as relevance to weakness) to be weak and negative.</p>
<p>If people view others at least implicitly as a potential means to goal pursuit (Orehek et al., 2018), then they may differentiate their best friend’s strengths and weaknesses across goals. In other words, it is possible that people will view their friend’s strengths and weaknesses as relevant to different goal contexts. Therefore, in line with this reasoning, I set the correlation between the predictors in this first simulation to be weak and negative (-0.10).</p>
<pre class="r"><code>##########################################################
##########################################################
###################### Simulation 1 ######################
###  Setting weak predictor and changing correlations  ###
########## Correlation between predictors = -.1 ##########
##########################################################
# Setting weak negative
sigma &lt;- matrix(c(1,-.1,
                -.1,  1), ncol=2)

# Creating predictors
x &lt;- rmvnorm(n=n1, mean=c(0,0), sigma=sigma)

relstrength&lt;-x[,1]
relweak&lt;-x[,2]
# Checking correlation between predictors
cor(x)</code></pre>
<pre><code>##             [,1]        [,2]
## [1,]  1.00000000 -0.06656283
## [2,] -0.06656283  1.00000000</code></pre>
<pre class="r"><code># Creating dataframe
X3&lt;-data.frame(relstrength=relstrength,relweak=relweak,X2)

###############################
######## Simulation 1a ########
###############################
# Random intercept and random slope of importance
Sub &lt;-diag(c(.6,.2))

# Setting cov between slope and intercept
Sub[lower.tri(Sub)] &lt;- .05

# Setting residual variance
s &lt;- (1-(sum(Sub)))^.5 
# Checking
s # Residual s2=.15 </code></pre>
<pre><code>## [1] 0.3872983</code></pre>
<p>Let’s check to make sure the multiple R^2 of the model makes sense.</p>
<pre class="r"><code># Finish Triangle for random items
Sub[upper.tri(Sub)] &lt;- .05

# Generating the simulation
SimInter1 &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub), sigma=s, data=X3)

#Check sim
summary(SimInter1)

# Check R2 - extract one model fit
Test.Data&lt;-getData(SimInter1)

# Checking the fixed R2 for the predictor
R2.test&lt;-r.squaredGLMM(SimInter1)
R2.test[,1] # 1.7%</code></pre>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: 
## DV ~ impcat + relstrength + relweak + impcat:relstrength + impcat:relweak +  
##     (1 + impcat | Subject)
##    Data: X3
## 
## REML criterion at convergence: 42117.5
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.0017 -0.5620  0.0052  0.5621  3.2168 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  Subject  (Intercept) 0.60     0.7746       
##           impcat      0.20     0.4472   0.14
##  Residual             0.15     0.3873       
## Number of obs: 30000, groups:  Subject, 5000
## 
## Fixed effects:
##                     Estimate Std. Error t value
## (Intercept)         0.000000   0.011181    0.00
## impcat              0.000000   0.007747    0.00
## relstrength         0.050000   0.002620   19.08
## relweak            -0.050000   0.002631  -19.00
## impcat:relstrength  0.100000   0.005223   19.15
## impcat:relweak     -0.150000   0.005270  -28.46
## 
## Correlation of Fixed Effects:
##             (Intr) impcat rlstrn relwek impct:rls
## impcat       0.116                               
## relstrength -0.002 -0.015                        
## relweak     -0.002 -0.010  0.061                 
## impct:rlstr -0.005 -0.005  0.013  0.000          
## impcat:rlwk -0.004 -0.005 -0.003 -0.016  0.063   
##       R2m 
## 0.0173314</code></pre>
<p>Here’s the effect size in Rho.</p>
<pre class="r"><code># Rho
R2.test[,1]^.5</code></pre>
<pre><code>##       R2m 
## 0.1316488</code></pre>
<p>And in Cohen’s <em>d</em>.</p>
<pre class="r"><code># Cohen&#39;s d 
d= (2*R2.test[,1]^.5) / (1-R2.test[,1])^.5
d # .27</code></pre>
<pre><code>##       R2m 
## 0.2656093</code></pre>
<p>Now, let’s extract one sample of the simulation and run our analysis on it to ensure it’s working properly.</p>
<pre class="r"><code># Extracting test data to run sample primary analysis
Test.Data&lt;-getData(SimInter1)

# Sample primary analysis
T1&lt;-lmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject),
         data=Test.Data, REML=F)
summary(T1)</code></pre>
<pre><code>## Linear mixed model fit by maximum likelihood  [&#39;lmerMod&#39;]
## Formula: 
## DV ~ impcat + relstrength + relweak + impcat:relstrength + impcat:relweak +  
##     (1 + impcat | Subject)
##    Data: Test.Data
## 
##      AIC      BIC   logLik deviance df.resid 
##  37366.4  37449.5 -18673.2  37346.4    29990 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.2988 -0.6156  0.0047  0.6182  3.6003 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  Subject  (Intercept) 0.09009  0.3001       
##           impcat      0.03380  0.1839   0.18
##  Residual             0.15040  0.3878       
## Number of obs: 30000, groups:  Subject, 5000
## 
## Fixed effects:
##                     Estimate Std. Error t value
## (Intercept)         0.002219   0.004800   0.462
## impcat             -0.009632   0.005180  -1.859
## relstrength         0.051483   0.002466  20.879
## relweak            -0.052046   0.002467 -21.096
## impcat:relstrength  0.097427   0.004905  19.861
## impcat:relweak     -0.161575   0.004946 -32.670
## 
## Correlation of Fixed Effects:
##             (Intr) impcat rlstrn relwek impct:rls
## impcat       0.081                               
## relstrength -0.004 -0.022                        
## relweak     -0.004 -0.014  0.062                 
## impct:rlstr -0.012 -0.007  0.021  0.002          
## impcat:rlwk -0.008 -0.007 -0.002 -0.008  0.066</code></pre>
<p>Yep. That went the way we expected it!</p>
<p>Here’s the expected relationship between the relevance to strength and importance on interpersonal trust. <img src="simulation_files/figure-html/unnamed-chunk-9-1.png" width=".49\linewidth" style="display: block; margin: auto;" /></p>
<p>Here’s the expected power at N = 100, 150, 200, 250, 300, 400, and 500 for the interaction.</p>
<pre class="r"><code>SCurve1
plot(SCurve1)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-11-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 78.00% (74.11, 81.56) - 600 rows
##     150: 92.20% (89.49, 94.39) - 900 rows
##     200: 97.80% (96.10, 98.90) - 1200 rows
##     250: 99.40% (98.26, 99.88) - 1500 rows
##     300: 99.80% (98.89, 99.99) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 21 m 24 s</code></pre>
<p>And here’s the expected relationship between the relevance to weakness and importance on interpersonal trust.</p>
<pre class="r"><code>#####################################################
### Plotting Primary Analysis: RelWeak*Importance ###
#####################################################
Final.Fixed2&lt;-effect(c(&quot;impcat*relweak&quot;), T1,
                     xlevels=list(impcat=c(-.5,+.5),
                     relweak=seq(-2,+2,.5)))

# Converting to a dataframe
Final.Fixed2&lt;-as.data.frame(Final.Fixed2)
# Recoding as factor
Final.Fixed2$impcatF&lt;-as.factor(Final.Fixed2$impcat)

# Plotting
Final.Fixed.Plot2 &lt;-ggplot(data = Final.Fixed2, aes(x = relweak, y =fit, group=impcatF))+
  geom_line(aes(color=impcatF), size=2)+
  geom_ribbon(aes(ymin=fit-se, ymax=fit+se,fill=impcatF),alpha=.2)+
  xlab(&quot;Relevance to Weakness&quot;)+
  ylab(&quot;Trust&quot;)+
  scale_color_manual(values=c(&quot;blue&quot;, &quot;red&quot;))+
  scale_fill_manual(values=c(&quot;blue&quot;, &quot;red&quot;))+
  theme_bw()+
  theme(text=element_text(face=&quot;bold&quot;, size=12),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(), 
        panel.border = element_rect(fill = NA, colour = &quot;NA&quot;),
        axis.line = element_line(size = 1, colour = &quot;grey80&quot;),
        legend.title=element_blank(),
        legend.position = c(.2, .92))
Final.Fixed.Plot2</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-12-1.png" width="312" style="display: block; margin: auto;" /></p>
<p>Here’s the expected power at N = 100, 150, 200, 250, 300, 400, and 500 for the interaction.</p>
<pre class="r"><code>SCurve2
plot(SCurve2)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-14-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 97.80% (96.10, 98.90) - 600 rows
##     150: 100.0% (99.26, 100.0) - 900 rows
##     200: 100.0% (99.26, 100.0) - 1200 rows
##     250: 100.0% (99.26, 100.0) - 1500 rows
##     300: 100.0% (99.26, 100.0) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 20 m 54 s</code></pre>
</div>
<div id="simulation-2" class="section level1">
<h1>Simulation 2</h1>
<p>In contrast to the potential situation just characterized, whereby people were expected to view their friend’s strengths and weaknesses as weakly and negative related, the next simulation estimates the effect of friend attributes’ goal relevance being positive correlated. In the study’s design, participants were first asked to identify and describe their personal projects and then to identify and describe their best friend. Therefore, the methods pressed for participants to imagine their personal projects, free from whom they may choose to rely upon. Consequently, it seemed possible that the same constellation of friend attributes may be perceived as both a strength and a weakness and relevant to similar situations. For example, perhaps Tim believes that Andy is a “free spirit.” Consequently, he may believe that Andy’s biggest strength is that he is good at generating novel solutions to problems, but Tim may believe Andy’s greatest weakness is that he is unreliable. To model this potential outcome in Simulation 2, I set a moderate and positive (0.40) correlation between the relevance of the best friends’ strengths and weaknesses to the goal.</p>
<pre class="r"><code>SCurve1b
plot(SCurve1b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-16-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 71.40% (67.22, 75.32) - 600 rows
##     150: 89.00% (85.92, 91.61) - 900 rows
##     200: 95.40% (93.18, 97.06) - 1200 rows
##     250: 98.60% (97.14, 99.44) - 1500 rows
##     300: 99.00% (97.68, 99.67) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 22 m 33 s</code></pre>
<pre class="r"><code>SCurve2b
plot(SCurve2b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-18-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 95.40% (93.18, 97.06) - 600 rows
##     150: 99.40% (98.26, 99.88) - 900 rows
##     200: 100.0% (99.26, 100.0) - 1200 rows
##     250: 100.0% (99.26, 100.0) - 1500 rows
##     300: 100.0% (99.26, 100.0) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 21 m 0 s</code></pre>
</div>
<div id="simulation-3" class="section level1">
<h1>Simulation 3</h1>
<p>In Simulation 3, I set a strong and positive (0.80) correlation between the relevance of the best friends’ strengths and weaknesses to the goal. This would be a worst-case scenario, not simply because of multicollinearity issues but because my predictions the effect of the relevance to strength and relevance to weakness on trust were in the opposite directions. Consequently, if Simulation 3 was true, then my hypotheses would certainly not be supported.</p>
<pre class="r"><code>set.seed(10101)

###############################
######## Simulation 1c ########
###############################
# Setting very strong positive relationship between predictors
sigma1c &lt;- matrix(c(1,.8,
                   .8, 1), ncol=2)
# Creating new predictors
x2c &lt;- rmvnorm(n=n1, mean=c(0,0), sigma=sigma1c)
relstrength1c&lt;-x2c[,1]
relweak1c&lt;-x2c[,2]

# Create dataframe
X3c&lt;-data.frame(relstrength=relstrength1c,relweak=relweak1c,X2)


# Generates the simulation
SimInter1c &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub), sigma=s, data=X3c)</code></pre>
<pre class="r"><code>SCurve1c
plot(SCurve1c)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-21-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 37.40% (33.14, 41.81) - 600 rows
##     150: 49.40% (44.93, 53.87) - 900 rows
##     200: 61.20% (56.77, 65.49) - 1200 rows
##     250: 74.00% (69.92, 77.79) - 1500 rows
##     300: 80.20% (76.43, 83.61) - 1800 rows
##     400: 88.80% (85.70, 91.43) - 2400 rows
##     500: 95.20% (92.94, 96.90) - 3000 rows
## 
## Time elapsed: 0 h 24 m 40 s</code></pre>
<pre class="r"><code>SCurve2C
plot(SCurve2C)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-23-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 64.40% (60.03, 68.60) - 600 rows
##     150: 84.00% (80.49, 87.10) - 900 rows
##     200: 92.20% (89.49, 94.39) - 1200 rows
##     250: 96.60% (94.61, 98.01) - 1500 rows
##     300: 98.60% (97.14, 99.44) - 1800 rows
##     400: 99.80% (98.89, 99.99) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 20 m 9 s</code></pre>
</div>
<div id="increasing-the-residual-variance" class="section level1">
<h1>Increasing the Residual Variance</h1>
<p>The second two simulations (M4, M5) modeled the effect of increasing the residual variance in the models on a priori power. Specifically, the total random variance was set to 1 and was allocated between the variance attributed to the random intercept, the random slope, the correlation between the random intercept and the slope, and the residual. In the first three models a large proportion of the variance was attributed to the random intercept (0.60), followed by the random slope (0.20), the residual (0.15), and the correlation between the random intercept and the slope (0.05). This specification assumes that much of the variability in trust is attributable to the individual’s general level of trust for their best friend. In other words, these models account for the fact that people really do tend to trust at varying levels (e.g., Rotter, 1980).</p>
<div id="simulation-4" class="section level2">
<h2>Simulation 4</h2>
<p>In M4, the amount of variance attributed to the random intercept was decreased to 0.40. Because the random intercept was allocated most of the random variance, it was the easiest term to reduce while ensuring interpretability between previous models. Moreover, it’s initial setting represented the more unrealistic parameter setting because it assumed 60% of the random variance was attributable to average levels of trust between individuals. The result of this change was that the residual variance was increased from 0.15 to 0.35 for M4.</p>
<pre class="r"><code>set.seed(10101)

###############################
######## Simulation 2a ########
###############################
# Decreasing variance of random intercept and ranmdom slope of importance to increase residuals
Sub2 &lt;-diag(c(.4,.2))

# Setting cov between slope and intercept
Sub2[lower.tri(Sub)] &lt;- .05

# Setting residual sd
s2 &lt;- (1-(sum(Sub2)))^.5 

# Finish Triangle for random items
Sub2[upper.tri(Sub2)] &lt;- .05

# Generating the simulation using the values generated from Sim 1 with increased residuals
SimInter2 &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub2), sigma=s2, data=X3b)</code></pre>
<pre class="r"><code>SCurve1
plot(SCurve1)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-26-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 35.20% (31.01, 39.56) - 600 rows
##     150: 51.00% (46.52, 55.46) - 900 rows
##     200: 64.00% (59.62, 68.21) - 1200 rows
##     250: 72.60% (68.46, 76.47) - 1500 rows
##     300: 80.00% (76.22, 83.42) - 1800 rows
##     400: 91.60% (88.82, 93.88) - 2400 rows
##     500: 96.40% (94.37, 97.85) - 3000 rows
## 
## Time elapsed: 0 h 21 m 39 s</code></pre>
<pre class="r"><code>SCurve2
plot(SCurve2)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-28-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 66.60% (62.28, 70.73) - 600 rows
##     150: 86.00% (82.65, 88.92) - 900 rows
##     200: 94.20% (91.78, 96.08) - 1200 rows
##     250: 97.00% (95.10, 98.31) - 1500 rows
##     300: 98.80% (97.41, 99.56) - 1800 rows
##     400: 99.80% (98.89, 99.99) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 21 m 52 s</code></pre>
</div>
<div id="simulation-5" class="section level2">
<h2>Simulation 5</h2>
<p>In M5, I further reduced the amount of variance attributable to the random intercept to 0.20. This model assumes that the majority of the random variance is attributable to the residual and is therefore left unpredicted (0.55). However, the random intercept is kept as one of the most predictive specified term in the random structure, but in M5 it is assumed to be equivalent to the random slope between goal importance and trust.</p>
<pre class="r"><code>set.seed(10101)

###############################
######## Simulation 2b ########
###############################
# Decreasing variance of random intercept and ranmdom slope of importance to increase residuals
Sub2b &lt;-diag(c(.2,.2))

# Setting cov between slope and intercept
Sub2b[lower.tri(Sub)] &lt;- .05

# Setting residual sd
s2b &lt;- (1-(sum(Sub2b)))^.5 
# Finish Triangle for random items
Sub2b[upper.tri(Sub2b)] &lt;- .05

# Generating the simulation using the values generated from Sim 1b
SimInter2b &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub2b), sigma=s2b, data=X3b)</code></pre>
<pre class="r"><code>SCurve1b
plot(SCurve1b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-31-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 24.00% (20.32, 27.99) - 600 rows
##     150: 39.00% (34.70, 43.43) - 900 rows
##     200: 46.80% (42.36, 51.28) - 1200 rows
##     250: 57.00% (52.53, 61.39) - 1500 rows
##     300: 64.40% (60.03, 68.60) - 1800 rows
##     400: 77.60% (73.69, 81.18) - 2400 rows
##     500: 86.20% (82.86, 89.10) - 3000 rows
## 
## Time elapsed: 0 h 22 m 8 s</code></pre>
<pre class="r"><code>SCurve2b
plot(SCurve2b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-33-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 52.00% (47.52, 56.46) - 600 rows
##     150: 68.20% (63.92, 72.26) - 900 rows
##     200: 78.00% (74.11, 81.56) - 1200 rows
##     250: 90.60% (87.70, 93.01) - 1500 rows
##     300: 95.60% (93.41, 97.22) - 1800 rows
##     400: 99.00% (97.68, 99.67) - 2400 rows
##     500: 99.80% (98.89, 99.99) - 3000 rows
## 
## Time elapsed: 0 h 21 m 3 s</code></pre>
</div>
</div>
<div id="the-study-goes-to-hell" class="section level1">
<h1>The Study Goes to Hell</h1>
<div id="simulation-6" class="section level2">
<h2>Simulation 6</h2>
<p>In my final model (M6), I use all of the parameter settings that decrease a priori power. Specifically, I set the correlation between my predictors to be 0.80, and I set my residual variance to be 0.55 by setting my random intercept term at 0.20, my random slope term at 0.20, and the variance attributed to the correlation between my random slope and intercept at 0.05. The parameters of M6 are unlikely because they assume that the fixed effects in my study are not predictive of trust, that participants will view their best friend’s strength and weakness as equivalently relevant across goals, and that the residual variance will account for 55% of the random variance (as opposed to the average level of trust between participants, the slope between goal importance and trust between participants, and the correlation between these two random terms). Therefore, this model’s estimate represents a lower bound on my expected power.</p>
<pre class="r"><code>#################################################################################
################################# Simulation 3 ##################################
###  Setting weak predictor, high residuals, and strong positive correlation  ###
#################################################################################

# Generating the simulation
SimInter3 &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub2b), sigma=s2b, data=X3c)</code></pre>
<pre class="r"><code>SCurve3
plot(SCurve3)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-36-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 14.00% (11.08, 17.35) - 600 rows
##     150: 20.40% (16.95, 24.20) - 900 rows
##     200: 26.20% (22.40, 30.29) - 1200 rows
##     250: 30.40% (26.39, 34.64) - 1500 rows
##     300: 35.40% (31.21, 39.77) - 1800 rows
##     400: 45.00% (40.58, 49.48) - 2400 rows
##     500: 52.00% (47.52, 56.46) - 3000 rows
## 
## Time elapsed: 0 h 21 m 46 s</code></pre>
<pre class="r"><code>SCurve3b
plot(SCurve3b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-38-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 29.40% (25.44, 33.61) - 600 rows
##     150: 38.00% (33.73, 42.42) - 900 rows
##     200: 44.00% (39.60, 48.48) - 1200 rows
##     250: 58.80% (54.34, 63.15) - 1500 rows
##     300: 63.80% (59.42, 68.02) - 1800 rows
##     400: 75.80% (71.80, 79.49) - 2400 rows
##     500: 85.60% (82.21, 88.56) - 3000 rows
## 
## Time elapsed: 0 h 20 m 44 s</code></pre>
</div>
</div>
<div id="graphing-power-of-n-400-across-all-simulations" class="section level1">
<h1>Graphing power of N = 400 across all simulations</h1>
<pre class="r"><code>Power400S&lt;-c(100, 100, 88.8, 92.4, 80.2, 45)
Power400w&lt;-c(100, 100, 99.8, 100, 98.4, 78)</code></pre>
<p>Here’s the expected power at N = 400 for the interaction between the relevance to strength and importance across all 6 simulations. <img src="simulation_files/figure-html/unnamed-chunk-40-1.png" width="312" style="display: block; margin: auto;" /></p>
<p>And here’s the expected power at N = 400 for the interaction between the relevance to weakness and importance across all 6 simulations. <img src="simulation_files/figure-html/unnamed-chunk-41-1.png" width="312" style="display: block; margin: auto;" /></p>
<p>Notice the second interaction has more power at pretty much every simulation? That’s because we set the interaction including the relevance to weakness to be <em>b</em> = -0.15 whereas we set the interaction including the relevance to strength to be <em>b</em> = +0.10. That 5/100 increase made a huge difference!</p>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogJ1NpbXVsYXRpbmcgQW4gUk0gU3R1ZHknDQpvdXRwdXQ6DQogIGh0bWxfZG9jdW1lbnQ6DQogICAgY29kZV9kb3dubG9hZDogeWVzDQogICAgZm9udHNpemU6IDhwdA0KICAgIGhpZ2hsaWdodDogdGV4dG1hdGUNCiAgICBudW1iZXJfc2VjdGlvbnM6IG5vDQogICAgdGhlbWU6IGZsYXRseQ0KICAgIHRvYzogeWVzDQogICAgdG9jX2Zsb2F0Og0KICAgICAgY29sbGFwc2VkOiBubw0KLS0tDQoNCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGNhY2hlID0gVFJVRSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldChtZXNzYWdlID0gRkFMU0UpDQprbml0cjo6b3B0c19jaHVuayRzZXQod2FybmluZyA9ICBGQUxTRSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldChmaWcud2lkdGg9My4yNSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldChmaWcuaGVpZ2h0PTIuNzUpDQprbml0cjo6b3B0c19jaHVuayRzZXQoZmlnLmFsaWduPSdjZW50ZXInKSANCmtuaXRyOjpvcHRzX2NodW5rJHNldChyZXN1bHRzPSdob2xkJykgDQpgYGANCg0KYGBge3IsIGVjaG89RkFMU0UsIHdhcm5pbmc9RkFMU0V9DQpzZXR3ZCgiQzovVXNlcnMvdGNhcnNlMi9Eb2N1bWVudHMvR2l0SHViL1RpbV9DYXJzZWwuZ2l0aHViLmlvIikNCmxpYnJhcnkoa25pdHIpDQpsaWJyYXJ5KGthYmxlRXh0cmEpDQpsaWJyYXJ5KHNpbXIpDQpsaWJyYXJ5KHRpZHlyKQ0KbGlicmFyeShnZ3Bsb3QyKQ0KbGlicmFyeShlZmZlY3RzKQ0KbGlicmFyeShtdnRub3JtKQ0KbGlicmFyeShiZWVwcikNCmxpYnJhcnkoZWZmZWN0cykNCmxpYnJhcnkoTXVNSW4pDQpgYGANCg0KXHBhZ2VicmVhaw0KDQpTdGF0aXN0aWNhbCBwb3dlciBpcyBhIHRyaWNreSBhbmQgb2NjYXNpb25hbGx5IGNvbmZ1c2luZyB0aGluZy4gRGVmaW5lZCBhcyB0aGUgcHJvYmFiaWxpdHkgb2YgcmVqZWN0aW5nIGEgZmFsc2UgbnVsbCBoeXBvdGhlc2lzLCBzdGF0aXN0aWNhbCBwb3dlciBpcyBhIGZ1bmN0aW9uIG9mIHRoZSBzaXplIG9mIHRoZSBlZmZlY3Qgb2YgaW50ZXJlc3QsIHRoZSBzaXplIG9mIHRoZSBzYW1wbGUsIGFuZCB0aGUgYWxwaGEgY3V0LW9mZi4gDQoNCkZvciBzaW1wbGUgZGVzaWducywgc3VjaCBhcyBhICp0Ki10ZXN0LCBkZXRlcm1pbmluZyB0aGUgcG93ZXIgb2YgYSBzdHVkeSBpcyByZWxhdGl2ZWx5IHN0cmFpZ2h0Zm9yd2FyZDogSWRlbnRpZnkgdGhlIGFyZWEgb2YgdGhlIGNvbXBhcmlzb24gZGlzdHJpYnV0aW9uIHRoYXQgbGllcyBiZXlvbmQgdGhlIGN1dC1wb2ludCBkZWZpbmVkIGJ5IGFscGhhLiBIb3dldmVyLCBmb3IgbW9yZSBjb21wbGljYXRlZCBkZXNpZ25zLCBsaWtlIHRob3NlIGludm9sdmluZyByZXBlYXRlZCBtZWFzdXJlcywgZGV0ZXJtaW5pbmcgdGhlIHBvd2VyIG9mIGEgc3R1ZHkgaXMgbXVjaCBtb3JlIGNvbnZvbHV0ZWQuIE9mdGVudGltZXMsIGl0IGlzIG5lY2Vzc2FyeSB0byByZXBlYXRlZGx5IHNpbXVsYXRlIHRoZSBleHBlY3RlZCByZXN1bHRzIG9mIHRoZSBzdHVkeSB1bmRlciBhIHZhcmlldHkgb2YgY29uZGl0aW9ucy4gDQoNCkJlbG93LCBJIHdhbGsgeW91IHRocm91Z2ggdGhlIHNpbXVsYXRpb25zIGFuZCBwb3dlciBhbmFseXNlcyBmb3IgbXkgZGlzc2VydGF0aW9uLg0KDQojIFNldHRpbmcgdGhlIEluaXRpYWwgVmFsdWVzDQoNCkZvciBvdXIgc2ltdWxhdGlvbnMsIHdlIHdpbGwgbmVlZCB0byBjcmVhdGUgYSBzYW1wbGUgb2YgZ2VuZXJhdGVkIGRhdGEuIFRoaW5rIG9mIHRoZXNlIGFzIGNvbXB1dGVyIHBlb3BsZSB3aG8gd2lsbCBhY3QgaW4gdGhlIHdheSB3ZSB0ZWxsIHRoZW0gdG8uIFRoZXNlIHZhbHVlcyBzdGF5IHRoZSBzYW1lIHRocm91Z2hvdXQgYWxsIG9mIHRoZSBzaW11bGF0aW9ucyBleGNlcHQgd2hlcmUgZXhwbGljaXRseSBtZW50aW9uZWQuDQpgYGB7cn0NCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIFNldHRpbmcgdGhlIHNlZWQgc28gdGhpcyBpcyB0aGUgc2FtZSBldmVyeXRpbWUgICAgICAgIw0Kc2V0LnNlZWQoMTAxMDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMNCiMgU2V0dGluZyB0aGUgbnVtYmVyIG9mIHN1YmplY3RzIHRvIGJlIDVrICAgICAgICAgICAgICAjDQpuMT01MDAwICMgTWFrZSBhbiBldmVuIG51bWJlciAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyBDcmVhdGluZyBhIHN1YmplY3QgSUQgbnVtYmVyICAgICAgICAgICAgICAgICAgICAgICAgICMgICAgICAgICAgICAgICAgIA0KU3ViamVjdDEgPSByZXAoMTpuMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMNCiMgQ3JlYXRpbmcgdGhlIG51bWJlciBvZiByZXBlYXRlZCBtZWFzdXJlcyAgICAgICAgICAgICAjDQpTZXNzaW9uczEgPSByZXAoMTo2KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyBDcmVhdGVzIFJNIGRlc2lnbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgDQpYMSA8LSBleHBhbmQuZ3JpZChTZXNzaW9ucz1TZXNzaW9uczEsU3ViamVjdD1TdWJqZWN0MSkgIw0KIyBBZGQgY292YXJpYXRlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMNCmltcGNhdDwtcmVwKGMoLS41LC41KSxuMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQpYMjwtZGF0YS5mcmFtZShpbXBjYXQ9aW1wY2F0LFgxKSAgICAgICAgICAgICAgICAgICAgICAgIw0KIyBTZXR0aW5nIGV4dHJlbWVseSB3ZWFrIHJlbGF0aW9uc2hpcHMgICAgICAgICAgICAgICAgICMNCmIxIDwtIGMoMCwwLC4wNSwtLjA1LC4xLC0uMTUpICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KYGBgDQoNCi0gSW4gdGhlIGNvZGUgYWJvdmUsIHdlIGNyZWF0ZWQgYSBzYW1wbGUgb2YgNTAwMCBzdWJqZWN0cyAoU3MpIHdobyBlYWNoIGhhdmUgNiBtZWFzdXJlbWVudHMgb2YgdGhlIGNyaXRlcmlvbiB2YXJpYWJsZS4gDQotIFRoZW4sIHdlIGFkZGVkIGEgYmV0d2Vlbi1zdWJqZWN0cyBjb3ZhcmlhdGUuIEluIHRoZSBjYXNlIG9mIG15IGRpc3NlcnRhdGlvbiwgSSBpbmNsdWRlZCBhIGNhdGVnb3JpY2FsIG1lYXN1cmUgb2YgZ29hbCBpbXBvcnRhbmNlIChNb3N0IEltcG9ydGFudCwgTGVhc3QgSW1wb3J0YW50KSB0byBpbmNsdWRlIGluIHRoZSByYW5kb20gc3RydWN0dXJlIG9mIHRoZSBtdWx0aWxldmVsIG1vZGVsLiANCi0gRmluYWxseSwgSSBpbml0aWFsaXplZCB0aGUgYmV0YSB2YWx1ZXMgZm9yIG15IGV2ZW50dWFsIG1vZGVsLCBzdGFydGluZyB3aXRoIHRoZSBpbnRlcmNlcHQsIG1vdmluZyB0aHJvdWdoIHRoZSBtYWluIGVmZmVjdHMsIGFuZCBlbmRpbmcgd2l0aCB0d28sIHR3by13YXkgaW50ZXJhY3Rpb25zLiANCg0KQXMgeW91IGNhbiBzZWUsIG90aGVyIHRoYW4gdGhlIGxhc3QgaW50ZXJhY3Rpb24sIEkgc2V0IG15IGV4cGVjdGVkIGJldGFzIHRvIGJlIHByZXR0eSB3ZWFrLiBUaGlzIGFsbG93ZWQgbWUgdG8gaGF2ZSBhIGNvbnNlcnZhdGl2ZSBlc3RpbWF0ZSBvZiBhIHByaW9yaSBwb3dlci4NCg0KIyMgRmlyc3QgU2V0IG9mIFNpbXVsYXRpb25zOiBWYXJ5aW5nIHRoZSBjb3ZhcmlhbmNlIGJldHdlZW4gcHJlZGljdG9ycw0KVGhlIGRlZ3JlZSB0byB3aGljaCBhIHNldCBvZiBwcmVkaWN0b3JzIGNvdmFyeSBhZmZlY3RzIHlvdXIgYWJpbGl0eSB0byByZWplY3QgYSBmYWxzZSBudWxsIGh5cG90aGVzaXMgKGkuZS4sIGl0IGFmZmVjdHMgeW91ciBwb3dlcikuIEluIHRoZXNlIGZpcnN0IHRocmVlIHNpbXVsYXRpb25zLCBJIGFtIGdvaW5nIHRvIGNoYW5nZSB0aGUgY29ycmVsYXRpb24gYW1vbmcgbXkgcHJlZGljdG9ycyBpbiBhIHByaW5jaXBsZWQgd2F5IGFuZCBvYnNlcnZlIGhvdyB0aGF0IGFmZmVjdHMgbXkgcG93ZXIuDQoNCiMgU2ltdWxhdGlvbiAxDQpJbiB0aGlzIGZpcnN0IHNpbXVsYXRpb24sIEkgd2lsbCBzZXQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHJlbGV2YW5jZSBvZiB0aGUgYmVzdCBmcmllbmQncyBzdHJlbmd0aCB0byB0aGUgZ29hbCAoaGVyZWFmdGVyIHJlZmVycmVkIHRvIGFzIHJlbGV2YW5jZSBvZiBzdHJlbmd0aCkgYW5kIHRoZSByZWxldmFuY2Ugb2YgdGhlIGJlc3QgZnJpZW5kJ3Mgd2Vha25lc3MgdG8gdGhlIGdvYWwgKGhlYXJlYWZ0ZXIgcmVmZXJyZWQgdG8gYXMgcmVsZXZhbmNlIHRvIHdlYWtuZXNzKSB0byBiZSB3ZWFrIGFuZCBuZWdhdGl2ZS4NCg0KSWYgcGVvcGxlIHZpZXcgb3RoZXJzIGF0IGxlYXN0IGltcGxpY2l0bHkgYXMgYSBwb3RlbnRpYWwgbWVhbnMgdG8gZ29hbCBwdXJzdWl0IChPcmVoZWsgZXQgYWwuLCAyMDE4KSwgdGhlbiB0aGV5IG1heSBkaWZmZXJlbnRpYXRlIHRoZWlyIGJlc3QgZnJpZW5k4oCZcyBzdHJlbmd0aHMgYW5kIHdlYWtuZXNzZXMgYWNyb3NzIGdvYWxzLiBJbiBvdGhlciB3b3JkcywgaXQgaXMgcG9zc2libGUgdGhhdCBwZW9wbGUgd2lsbCB2aWV3IHRoZWlyIGZyaWVuZOKAmXMgc3RyZW5ndGhzIGFuZCB3ZWFrbmVzc2VzIGFzIHJlbGV2YW50IHRvIGRpZmZlcmVudCBnb2FsIGNvbnRleHRzLiBUaGVyZWZvcmUsIGluIGxpbmUgd2l0aCB0aGlzIHJlYXNvbmluZywgSSBzZXQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHByZWRpY3RvcnMgaW4gdGhpcyBmaXJzdCBzaW11bGF0aW9uIHRvIGJlIHdlYWsgYW5kIG5lZ2F0aXZlICgtMC4xMCkuDQoNCmBgYHtyfQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBTaW11bGF0aW9uIDEgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjICBTZXR0aW5nIHdlYWsgcHJlZGljdG9yIGFuZCBjaGFuZ2luZyBjb3JyZWxhdGlvbnMgICMjIw0KIyMjIyMjIyMjIyBDb3JyZWxhdGlvbiBiZXR3ZWVuIHByZWRpY3RvcnMgPSAtLjEgIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBTZXR0aW5nIHdlYWsgbmVnYXRpdmUNCnNpZ21hIDwtIG1hdHJpeChjKDEsLS4xLA0KICAgICAgICAgICAgICAgIC0uMSwgIDEpLCBuY29sPTIpDQoNCiMgQ3JlYXRpbmcgcHJlZGljdG9ycw0KeCA8LSBybXZub3JtKG49bjEsIG1lYW49YygwLDApLCBzaWdtYT1zaWdtYSkNCg0KcmVsc3RyZW5ndGg8LXhbLDFdDQpyZWx3ZWFrPC14WywyXQ0KIyBDaGVja2luZyBjb3JyZWxhdGlvbiBiZXR3ZWVuIHByZWRpY3RvcnMNCmNvcih4KQ0KYGBgDQpgYGB7cn0NCiMgQ3JlYXRpbmcgZGF0YWZyYW1lDQpYMzwtZGF0YS5mcmFtZShyZWxzdHJlbmd0aD1yZWxzdHJlbmd0aCxyZWx3ZWFrPXJlbHdlYWssWDIpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIFNpbXVsYXRpb24gMWEgIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMgUmFuZG9tIGludGVyY2VwdCBhbmQgcmFuZG9tIHNsb3BlIG9mIGltcG9ydGFuY2UNClN1YiA8LWRpYWcoYyguNiwuMikpDQoNCiMgU2V0dGluZyBjb3YgYmV0d2VlbiBzbG9wZSBhbmQgaW50ZXJjZXB0DQpTdWJbbG93ZXIudHJpKFN1YildIDwtIC4wNQ0KDQojIFNldHRpbmcgcmVzaWR1YWwgdmFyaWFuY2UNCnMgPC0gKDEtKHN1bShTdWIpKSleLjUgDQojIENoZWNraW5nDQpzICMgUmVzaWR1YWwgczI9LjE1IA0KYGBgDQoNCg0KTGV0J3MgY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBtdWx0aXBsZSBSXjIgb2YgdGhlIG1vZGVsIG1ha2VzIHNlbnNlLg0KYGBge3J9DQojIEZpbmlzaCBUcmlhbmdsZSBmb3IgcmFuZG9tIGl0ZW1zDQpTdWJbdXBwZXIudHJpKFN1YildIDwtIC4wNQ0KDQojIEdlbmVyYXRpbmcgdGhlIHNpbXVsYXRpb24NClNpbUludGVyMSA8LSBtYWtlTG1lcihEViB+IGltcGNhdCtyZWxzdHJlbmd0aCtyZWx3ZWFrK2ltcGNhdDpyZWxzdHJlbmd0aCtpbXBjYXQ6cmVsd2VhayArKDEraW1wY2F0fFN1YmplY3QpLCANCiAgICAgICAgICAgICAgICAgICAgICBmaXhlZj1iMSwgVmFyQ29ycj1saXN0KFN1YiksIHNpZ21hPXMsIGRhdGE9WDMpDQoNCiNDaGVjayBzaW0NCnN1bW1hcnkoU2ltSW50ZXIxKQ0KDQojIENoZWNrIFIyIC0gZXh0cmFjdCBvbmUgbW9kZWwgZml0DQpUZXN0LkRhdGE8LWdldERhdGEoU2ltSW50ZXIxKQ0KDQojIENoZWNraW5nIHRoZSBmaXhlZCBSMiBmb3IgdGhlIHByZWRpY3Rvcg0KUjIudGVzdDwtci5zcXVhcmVkR0xNTShTaW1JbnRlcjEpDQpSMi50ZXN0WywxXSAjIDEuNyUNCmBgYA0KDQoNCkhlcmUncyB0aGUgZWZmZWN0IHNpemUgaW4gUmhvLg0KYGBge3J9DQojIFJobw0KUjIudGVzdFssMV1eLjUNCmBgYA0KDQoNCkFuZCBpbiBDb2hlbidzICpkKi4NCmBgYHtyfQ0KIyBDb2hlbidzIGQgDQpkPSAoMipSMi50ZXN0WywxXV4uNSkgLyAoMS1SMi50ZXN0WywxXSleLjUNCmQgIyAuMjcNCmBgYA0KDQoNCk5vdywgbGV0J3MgZXh0cmFjdCBvbmUgc2FtcGxlIG9mIHRoZSBzaW11bGF0aW9uIGFuZCBydW4gb3VyIGFuYWx5c2lzIG9uIGl0IHRvIGVuc3VyZSBpdCdzIHdvcmtpbmcgcHJvcGVybHkuDQpgYGB7cn0NCiMgRXh0cmFjdGluZyB0ZXN0IGRhdGEgdG8gcnVuIHNhbXBsZSBwcmltYXJ5IGFuYWx5c2lzDQpUZXN0LkRhdGE8LWdldERhdGEoU2ltSW50ZXIxKQ0KDQojIFNhbXBsZSBwcmltYXJ5IGFuYWx5c2lzDQpUMTwtbG1lcihEViB+IGltcGNhdCtyZWxzdHJlbmd0aCtyZWx3ZWFrK2ltcGNhdDpyZWxzdHJlbmd0aCtpbXBjYXQ6cmVsd2VhayArKDEraW1wY2F0fFN1YmplY3QpLA0KICAgICAgICAgZGF0YT1UZXN0LkRhdGEsIFJFTUw9RikNCnN1bW1hcnkoVDEpDQpgYGANClllcC4gVGhhdCB3ZW50IHRoZSB3YXkgd2UgZXhwZWN0ZWQgaXQhDQoNCg0KSGVyZSdzIHRoZSBleHBlY3RlZCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgcmVsZXZhbmNlIHRvIHN0cmVuZ3RoIGFuZCBpbXBvcnRhbmNlIG9uIGludGVycGVyc29uYWwgdHJ1c3QuDQpgYGB7ciwgLCBlY2hvPUZBTFNFLCBvdXQud2lkdGg9Jy40OVxcbGluZXdpZHRoJywgZmlnLndpZHRoPTIuMjUsIGZpZy5oZWlnaHQ9Mi41LGZpZy5zaG93PSdob2xkJyxmaWcuYWxpZ249J2NlbnRlcid9DQojIFBsb3R0aW5nIGludGVyYWN0aW9uIGJldHdlZW4gaW1wb3J0YW5jZSBhbmQgdGhlIHJlbGV2YW5jZSBvZiB0aGUgZnJpZW5kJ3Mgc3RyZW5ndGggdG8gdGhlIGdvYWwNCkZpbmFsLkZpeGVkPC1lZmZlY3QoYygiaW1wY2F0KnJlbHN0cmVuZ3RoIiksIFQxLA0KICAgICAgICAgICAgICAgICAgICB4bGV2ZWxzPWxpc3QoaW1wY2F0PWMoLS41LCsuNSksDQogICAgICAgICAgICAgICAgICAgIHJlbHN0cmVuZ3RoPXNlcSgtMiwrMiwuNSkpKQ0KDQojIENvbnZlcnRpbmcgdG8gZGF0YWZyYW1lDQpGaW5hbC5GaXhlZDwtYXMuZGF0YS5mcmFtZShGaW5hbC5GaXhlZCkNCiMgUmVjb2RpbmcgYXMgZmFjdG9yDQpGaW5hbC5GaXhlZCRpbXBjYXRGPC1hcy5mYWN0b3IoRmluYWwuRml4ZWQkaW1wY2F0KQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyBQbG90dGluZyBQcmltYXJ5IEFuYWx5c2lzOiBSZWxTdHJlbmd0aCpJbXBvcnRhbmNlICMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpGaW5hbC5GaXhlZC5QbG90IDwtZ2dwbG90KGRhdGEgPSBGaW5hbC5GaXhlZCwgYWVzKHggPSByZWxzdHJlbmd0aCwgeSA9Zml0LCBncm91cD1pbXBjYXRGKSkrDQogIGdlb21fbGluZShhZXMoY29sb3I9aW1wY2F0RiksIHNpemU9MikrDQogIGdlb21fcmliYm9uKGFlcyh5bWluPWZpdC1zZSwgeW1heD1maXQrc2UsZmlsbD1pbXBjYXRGKSxhbHBoYT0uMikrDQogIHhsYWIoIlJlbGV2YW5jZSB0byBTdHJlbmd0aCIpKw0KICB5bGFiKCJUcnVzdCIpKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzPWMoImJsdWUiLCAicmVkIikpKw0KICBzY2FsZV9maWxsX21hbnVhbCh2YWx1ZXM9YygiYmx1ZSIsICJyZWQiKSkrDQogIHRoZW1lX2J3KCkrDQogIHRoZW1lKHRleHQ9ZWxlbWVudF90ZXh0KGZhY2U9ImJvbGQiLCBzaXplPTEyKSwNCiAgICAgICAgcGFuZWwuZ3JpZC5tYWpvciA9IGVsZW1lbnRfYmxhbmsoKSwgDQogICAgICAgIHBhbmVsLmdyaWQubWlub3IgPSBlbGVtZW50X2JsYW5rKCksIA0KICAgICAgICBwYW5lbC5ib3JkZXIgPSBlbGVtZW50X3JlY3QoZmlsbCA9IE5BLCBjb2xvdXIgPSAiTkEiKSwNCiAgICAgICAgYXhpcy5saW5lID0gZWxlbWVudF9saW5lKHNpemUgPSAxLCBjb2xvdXIgPSAiZ3JleTgwIiksDQogICAgICAgIGxlZ2VuZC50aXRsZT1lbGVtZW50X2JsYW5rKCksDQogICAgICAgIGxlZ2VuZC5wb3NpdGlvbiA9IGMoLjIsIC45MikpDQpGaW5hbC5GaXhlZC5QbG90DQpgYGANCg0KDQpIZXJlJ3MgdGhlIGV4cGVjdGVkIHBvd2VyIGF0IE4gPSAxMDAsIDE1MCwgMjAwLCAyNTAsIDMwMCwgNDAwLCBhbmQgNTAwIGZvciB0aGUgaW50ZXJhY3Rpb24uDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFN0cmVuZ3RoIEludGVyYWN0aW9uIDEgIyMjDQpTQ3VydmUxPC1wb3dlckN1cnZlKFNpbUludGVyMSwgZml4ZWQoImltcGNhdDpyZWxzdHJlbmd0aCIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTENCnBsb3QoU0N1cnZlMSkNCmBgYA0KDQoNCg0KQW5kIGhlcmUncyB0aGUgZXhwZWN0ZWQgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIHJlbGV2YW5jZSB0byB3ZWFrbmVzcyBhbmQgaW1wb3J0YW5jZSBvbiBpbnRlcnBlcnNvbmFsIHRydXN0Lg0KYGBge3J9DQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIFBsb3R0aW5nIFByaW1hcnkgQW5hbHlzaXM6IFJlbFdlYWsqSW1wb3J0YW5jZSAjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpGaW5hbC5GaXhlZDI8LWVmZmVjdChjKCJpbXBjYXQqcmVsd2VhayIpLCBUMSwNCiAgICAgICAgICAgICAgICAgICAgIHhsZXZlbHM9bGlzdChpbXBjYXQ9YygtLjUsKy41KSwNCiAgICAgICAgICAgICAgICAgICAgIHJlbHdlYWs9c2VxKC0yLCsyLC41KSkpDQoNCiMgQ29udmVydGluZyB0byBhIGRhdGFmcmFtZQ0KRmluYWwuRml4ZWQyPC1hcy5kYXRhLmZyYW1lKEZpbmFsLkZpeGVkMikNCiMgUmVjb2RpbmcgYXMgZmFjdG9yDQpGaW5hbC5GaXhlZDIkaW1wY2F0RjwtYXMuZmFjdG9yKEZpbmFsLkZpeGVkMiRpbXBjYXQpDQoNCiMgUGxvdHRpbmcNCkZpbmFsLkZpeGVkLlBsb3QyIDwtZ2dwbG90KGRhdGEgPSBGaW5hbC5GaXhlZDIsIGFlcyh4ID0gcmVsd2VhaywgeSA9Zml0LCBncm91cD1pbXBjYXRGKSkrDQogIGdlb21fbGluZShhZXMoY29sb3I9aW1wY2F0RiksIHNpemU9MikrDQogIGdlb21fcmliYm9uKGFlcyh5bWluPWZpdC1zZSwgeW1heD1maXQrc2UsZmlsbD1pbXBjYXRGKSxhbHBoYT0uMikrDQogIHhsYWIoIlJlbGV2YW5jZSB0byBXZWFrbmVzcyIpKw0KICB5bGFiKCJUcnVzdCIpKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzPWMoImJsdWUiLCAicmVkIikpKw0KICBzY2FsZV9maWxsX21hbnVhbCh2YWx1ZXM9YygiYmx1ZSIsICJyZWQiKSkrDQogIHRoZW1lX2J3KCkrDQogIHRoZW1lKHRleHQ9ZWxlbWVudF90ZXh0KGZhY2U9ImJvbGQiLCBzaXplPTEyKSwNCiAgICAgICAgcGFuZWwuZ3JpZC5tYWpvciA9IGVsZW1lbnRfYmxhbmsoKSwgDQogICAgICAgIHBhbmVsLmdyaWQubWlub3IgPSBlbGVtZW50X2JsYW5rKCksIA0KICAgICAgICBwYW5lbC5ib3JkZXIgPSBlbGVtZW50X3JlY3QoZmlsbCA9IE5BLCBjb2xvdXIgPSAiTkEiKSwNCiAgICAgICAgYXhpcy5saW5lID0gZWxlbWVudF9saW5lKHNpemUgPSAxLCBjb2xvdXIgPSAiZ3JleTgwIiksDQogICAgICAgIGxlZ2VuZC50aXRsZT1lbGVtZW50X2JsYW5rKCksDQogICAgICAgIGxlZ2VuZC5wb3NpdGlvbiA9IGMoLjIsIC45MikpDQpGaW5hbC5GaXhlZC5QbG90Mg0KYGBgDQoNCg0KDQpIZXJlJ3MgdGhlIGV4cGVjdGVkIHBvd2VyIGF0IE4gPSAxMDAsIDE1MCwgMjAwLCAyNTAsIDMwMCwgNDAwLCBhbmQgNTAwIGZvciB0aGUgaW50ZXJhY3Rpb24uDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFdlYWsgSW50ZXJhY3Rpb24gMSAjIyMNClNDdXJ2ZTI8LXBvd2VyQ3VydmUoU2ltSW50ZXIxLCBmaXhlZCgiaW1wY2F0OnJlbHdlYWsiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgIGFsb25nID0gIlN1YmplY3QiLA0KICAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUyDQpwbG90KFNDdXJ2ZTIpDQoNCmBgYA0KDQojIFNpbXVsYXRpb24gMg0KSW4gY29udHJhc3QgdG8gdGhlIHBvdGVudGlhbCBzaXR1YXRpb24ganVzdCBjaGFyYWN0ZXJpemVkLCB3aGVyZWJ5IHBlb3BsZSB3ZXJlIGV4cGVjdGVkIHRvIHZpZXcgdGhlaXIgZnJpZW5k4oCZcyBzdHJlbmd0aHMgYW5kIHdlYWtuZXNzZXMgYXMgd2Vha2x5IGFuZCBuZWdhdGl2ZSByZWxhdGVkLCB0aGUgbmV4dCBzaW11bGF0aW9uIGVzdGltYXRlcyB0aGUgZWZmZWN0IG9mIGZyaWVuZCBhdHRyaWJ1dGVz4oCZIGdvYWwgcmVsZXZhbmNlIGJlaW5nIHBvc2l0aXZlIGNvcnJlbGF0ZWQuIEluIHRoZSBzdHVkeeKAmXMgZGVzaWduLCBwYXJ0aWNpcGFudHMgd2VyZSBmaXJzdCBhc2tlZCB0byBpZGVudGlmeSBhbmQgZGVzY3JpYmUgdGhlaXIgcGVyc29uYWwgcHJvamVjdHMgYW5kIHRoZW4gdG8gaWRlbnRpZnkgYW5kIGRlc2NyaWJlIHRoZWlyIGJlc3QgZnJpZW5kLiBUaGVyZWZvcmUsIHRoZSBtZXRob2RzIHByZXNzZWQgZm9yIHBhcnRpY2lwYW50cyB0byBpbWFnaW5lIHRoZWlyIHBlcnNvbmFsIHByb2plY3RzLCBmcmVlIGZyb20gd2hvbSB0aGV5IG1heSBjaG9vc2UgdG8gcmVseSB1cG9uLiBDb25zZXF1ZW50bHksIGl0IHNlZW1lZCBwb3NzaWJsZSB0aGF0IHRoZSBzYW1lIGNvbnN0ZWxsYXRpb24gb2YgZnJpZW5kIGF0dHJpYnV0ZXMgbWF5IGJlIHBlcmNlaXZlZCBhcyBib3RoIGEgc3RyZW5ndGggYW5kIGEgd2Vha25lc3MgYW5kIHJlbGV2YW50IHRvIHNpbWlsYXIgc2l0dWF0aW9ucy4gRm9yIGV4YW1wbGUsIHBlcmhhcHMgVGltIGJlbGlldmVzIHRoYXQgQW5keSBpcyBhIOKAnGZyZWUgc3Bpcml0LuKAnSBDb25zZXF1ZW50bHksIGhlIG1heSBiZWxpZXZlIHRoYXQgQW5keeKAmXMgYmlnZ2VzdCBzdHJlbmd0aCBpcyB0aGF0IGhlIGlzIGdvb2QgYXQgZ2VuZXJhdGluZyBub3ZlbCBzb2x1dGlvbnMgdG8gcHJvYmxlbXMsIGJ1dCBUaW0gbWF5IGJlbGlldmUgQW5keeKAmXMgZ3JlYXRlc3Qgd2Vha25lc3MgaXMgdGhhdCBoZSBpcyB1bnJlbGlhYmxlLiBUbyBtb2RlbCB0aGlzIHBvdGVudGlhbCBvdXRjb21lIGluIFNpbXVsYXRpb24gMiwgSSBzZXQgYSBtb2RlcmF0ZSBhbmQgcG9zaXRpdmUgKDAuNDApIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHJlbGV2YW5jZSBvZiB0aGUgYmVzdCBmcmllbmRz4oCZIHN0cmVuZ3RocyBhbmQgd2Vha25lc3NlcyB0byB0aGUgZ29hbC4NCg0KDQpgYGB7ciwgZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMgUmVzZXR0aW5nIHNlZWQNCnNldC5zZWVkKDEwMTAxKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyBTaW11bGF0aW9uIDFiICMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIFNldHRpbmcgc3Ryb25nIHBvc2l0aXZlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHByZWRpY3RvcnMNCiMjIHRvIGNvbnRyb2wgZm9yIHBvdGVudGlhbCBlZmZlY3Qgb2YgY29sbGluZWFyaXR5IG9uIHBvd2VyDQpzaWdtYTFiIDwtIG1hdHJpeChjKDEsLjQsDQogICAgICAgICAgICAgICAgICAuNCAsMSksIG5jb2w9MikNCiMgQ3JlYXRpbmcgcHJlZGljdG9ycw0KeDJiIDwtIHJtdm5vcm0obj1uMSwgbWVhbj1jKDAsMCksIHNpZ21hPXNpZ21hMWIpDQoNCiMgQ3JlYXRpbmcgbmV3IHByZWRpY3RvcnMgd2l0aCBzdHJvbmcgcG9zaXRpdmUgY29ycmVsYXRpb24NCnJlbHN0cmVuZ3RoMWI8LXgyYlssMV0NCnJlbHdlYWsxYjwteDJiWywyXQ0KDQojIENyZWF0aW5nIG5ldyBkYXRhZnJhbWUNClgzYjwtZGF0YS5mcmFtZShyZWxzdHJlbmd0aD1yZWxzdHJlbmd0aDFiLHJlbHdlYWs9cmVsd2VhazFiLFgyKQ0KDQojIEdlbmVyYXRlcyB0aGUgc2ltdWxhdGlvbg0KU2ltSW50ZXIxYiA8LSBtYWtlTG1lcihEViB+IGltcGNhdCtyZWxzdHJlbmd0aCtyZWx3ZWFrK2ltcGNhdDpyZWxzdHJlbmd0aCtpbXBjYXQ6cmVsd2VhayArKDEraW1wY2F0fFN1YmplY3QpLCANCiAgICAgICAgICAgICAgICAgICAgICBmaXhlZj1iMSwgVmFyQ29ycj1saXN0KFN1YiksIHNpZ21hPXMsIGRhdGE9WDNiKQ0KDQojIyMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgUmVsU3RyZW5ndGggSW50ZXJhY3Rpb24gMWIgIyMjDQpTQ3VydmUxYjwtcG93ZXJDdXJ2ZShTaW1JbnRlcjFiLCBmaXhlZCgiaW1wY2F0OnJlbHN0cmVuZ3RoIiwgImxyIiksDQogICAgICAgICAgICAgICAgICAgIGFsb25nID0gIlN1YmplY3QiLA0KICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKDEwMCwxNTAsMjAwLDI1MCwzMDAsNDAwLDUwMCksDQogICAgICAgICAgICAgICAgICAgIG5zaW09NTAwLGFscGhhPS4wNDUsIHByb2dyZXNzPVRSVUUpDQpgYGANCg0KDQoNCmBgYHtyfQ0KU0N1cnZlMWINCnBsb3QoU0N1cnZlMWIpDQpgYGANCg0KDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFN0cmVuZ3RoIEludGVyYWN0aW9uIDFiICMjIw0KU0N1cnZlMmI8LXBvd2VyQ3VydmUoU2ltSW50ZXIxYiwgZml4ZWQoImltcGNhdDpyZWx3ZWFrIiwgImxyIiksDQogICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgIG5zaW09NTAwLGFscGhhPS4wNDUsIHByb2dyZXNzPVRSVUUpDQpgYGANCg0KDQoNCmBgYHtyfQ0KU0N1cnZlMmINCnBsb3QoU0N1cnZlMmIpDQoNCmBgYA0KDQojIFNpbXVsYXRpb24gMw0KSW4gU2ltdWxhdGlvbiAzLCBJIHNldCBhIHN0cm9uZyBhbmQgcG9zaXRpdmUgKDAuODApIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHJlbGV2YW5jZSBvZiB0aGUgYmVzdCBmcmllbmRz4oCZIHN0cmVuZ3RocyBhbmQgd2Vha25lc3NlcyB0byB0aGUgZ29hbC4gVGhpcyB3b3VsZCBiZSBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8sIG5vdCBzaW1wbHkgYmVjYXVzZSBvZiBtdWx0aWNvbGxpbmVhcml0eSBpc3N1ZXMgYnV0IGJlY2F1c2UgbXkgcHJlZGljdGlvbnMgdGhlIGVmZmVjdCBvZiB0aGUgcmVsZXZhbmNlIHRvIHN0cmVuZ3RoIGFuZCByZWxldmFuY2UgdG8gd2Vha25lc3Mgb24gdHJ1c3Qgd2VyZSBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9ucy4gQ29uc2VxdWVudGx5LCBpZiBTaW11bGF0aW9uIDMgd2FzIHRydWUsIHRoZW4gbXkgaHlwb3RoZXNlcyB3b3VsZCBjZXJ0YWlubHkgbm90IGJlIHN1cHBvcnRlZC4NCg0KYGBge3J9DQpzZXQuc2VlZCgxMDEwMSkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMgU2ltdWxhdGlvbiAxYyAjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBTZXR0aW5nIHZlcnkgc3Ryb25nIHBvc2l0aXZlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHByZWRpY3RvcnMNCnNpZ21hMWMgPC0gbWF0cml4KGMoMSwuOCwNCiAgICAgICAgICAgICAgICAgICAuOCwgMSksIG5jb2w9MikNCiMgQ3JlYXRpbmcgbmV3IHByZWRpY3RvcnMNCngyYyA8LSBybXZub3JtKG49bjEsIG1lYW49YygwLDApLCBzaWdtYT1zaWdtYTFjKQ0KcmVsc3RyZW5ndGgxYzwteDJjWywxXQ0KcmVsd2VhazFjPC14MmNbLDJdDQoNCiMgQ3JlYXRlIGRhdGFmcmFtZQ0KWDNjPC1kYXRhLmZyYW1lKHJlbHN0cmVuZ3RoPXJlbHN0cmVuZ3RoMWMscmVsd2Vhaz1yZWx3ZWFrMWMsWDIpDQoNCg0KIyBHZW5lcmF0ZXMgdGhlIHNpbXVsYXRpb24NClNpbUludGVyMWMgPC0gbWFrZUxtZXIoRFYgfiBpbXBjYXQrcmVsc3RyZW5ndGgrcmVsd2VhaytpbXBjYXQ6cmVsc3RyZW5ndGgraW1wY2F0OnJlbHdlYWsgKygxK2ltcGNhdHxTdWJqZWN0KSwgDQogICAgICAgICAgICAgICAgICAgICAgZml4ZWY9YjEsIFZhckNvcnI9bGlzdChTdWIpLCBzaWdtYT1zLCBkYXRhPVgzYykNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgcmVsc3RyZW5ndGgNClNDdXJ2ZTFjPC1wb3dlckN1cnZlKFNpbUludGVyMWMsIGZpeGVkKCJpbXBjYXQ6cmVsc3RyZW5ndGgiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUxYw0KcGxvdChTQ3VydmUxYykNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgcmVsd2Vha25lc3MNClNDdXJ2ZTJDPC1wb3dlckN1cnZlKFNpbUludGVyMWMsIGZpeGVkKCJpbXBjYXQ6cmVsd2VhayIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKDEwMCwxNTAsMjAwLDI1MCwzMDAsNDAwLDUwMCksDQogICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTJDDQpwbG90KFNDdXJ2ZTJDKQ0KYGBgDQoNCiMgSW5jcmVhc2luZyB0aGUgUmVzaWR1YWwgVmFyaWFuY2UNClRoZSBzZWNvbmQgdHdvIHNpbXVsYXRpb25zIChNNCwgTTUpIG1vZGVsZWQgdGhlIGVmZmVjdCBvZiBpbmNyZWFzaW5nIHRoZSByZXNpZHVhbCB2YXJpYW5jZSBpbiB0aGUgbW9kZWxzIG9uIGEgcHJpb3JpIHBvd2VyLiBTcGVjaWZpY2FsbHksIHRoZSB0b3RhbCByYW5kb20gdmFyaWFuY2Ugd2FzIHNldCB0byAxIGFuZCB3YXMgYWxsb2NhdGVkIGJldHdlZW4gdGhlIHZhcmlhbmNlIGF0dHJpYnV0ZWQgdG8gdGhlIHJhbmRvbSBpbnRlcmNlcHQsIHRoZSByYW5kb20gc2xvcGUsIHRoZSBjb3JyZWxhdGlvbiBiZXR3ZWVuIHRoZSByYW5kb20gaW50ZXJjZXB0IGFuZCB0aGUgc2xvcGUsIGFuZCB0aGUgcmVzaWR1YWwuIEluIHRoZSBmaXJzdCB0aHJlZSBtb2RlbHMgYSBsYXJnZSBwcm9wb3J0aW9uIG9mIHRoZSB2YXJpYW5jZSB3YXMgYXR0cmlidXRlZCB0byB0aGUgcmFuZG9tIGludGVyY2VwdCAoMC42MCksIGZvbGxvd2VkIGJ5IHRoZSByYW5kb20gc2xvcGUgKDAuMjApLCB0aGUgcmVzaWR1YWwgKDAuMTUpLCBhbmQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHJhbmRvbSBpbnRlcmNlcHQgYW5kIHRoZSBzbG9wZSAoMC4wNSkuIFRoaXMgc3BlY2lmaWNhdGlvbiBhc3N1bWVzIHRoYXQgbXVjaCBvZiB0aGUgdmFyaWFiaWxpdHkgaW4gdHJ1c3QgaXMgYXR0cmlidXRhYmxlIHRvIHRoZSBpbmRpdmlkdWFs4oCZcyBnZW5lcmFsIGxldmVsIG9mIHRydXN0IGZvciB0aGVpciBiZXN0IGZyaWVuZC4gSW4gb3RoZXIgd29yZHMsIHRoZXNlIG1vZGVscyBhY2NvdW50IGZvciB0aGUgZmFjdCB0aGF0IHBlb3BsZSByZWFsbHkgZG8gdGVuZCB0byB0cnVzdCBhdCB2YXJ5aW5nIGxldmVscyAoZS5nLiwgUm90dGVyLCAxOTgwKS4NCg0KIyMgU2ltdWxhdGlvbiA0DQpJbiBNNCwgdGhlIGFtb3VudCBvZiB2YXJpYW5jZSBhdHRyaWJ1dGVkIHRvIHRoZSByYW5kb20gaW50ZXJjZXB0IHdhcyBkZWNyZWFzZWQgdG8gMC40MC4gQmVjYXVzZSB0aGUgcmFuZG9tIGludGVyY2VwdCB3YXMgYWxsb2NhdGVkIG1vc3Qgb2YgdGhlIHJhbmRvbSB2YXJpYW5jZSwgaXQgd2FzIHRoZSBlYXNpZXN0IHRlcm0gdG8gcmVkdWNlIHdoaWxlIGVuc3VyaW5nIGludGVycHJldGFiaWxpdHkgYmV0d2VlbiBwcmV2aW91cyBtb2RlbHMuIE1vcmVvdmVyLCBpdOKAmXMgaW5pdGlhbCBzZXR0aW5nIHJlcHJlc2VudGVkIHRoZSBtb3JlIHVucmVhbGlzdGljIHBhcmFtZXRlciBzZXR0aW5nIGJlY2F1c2UgaXQgYXNzdW1lZCA2MCUgb2YgdGhlIHJhbmRvbSB2YXJpYW5jZSB3YXMgYXR0cmlidXRhYmxlIHRvIGF2ZXJhZ2UgbGV2ZWxzIG9mIHRydXN0IGJldHdlZW4gaW5kaXZpZHVhbHMuIFRoZSByZXN1bHQgb2YgdGhpcyBjaGFuZ2Ugd2FzIHRoYXQgdGhlIHJlc2lkdWFsIHZhcmlhbmNlIHdhcyBpbmNyZWFzZWQgZnJvbSAwLjE1IHRvIDAuMzUgZm9yIE00Lg0KDQpgYGB7cn0NCnNldC5zZWVkKDEwMTAxKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyBTaW11bGF0aW9uIDJhICMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIERlY3JlYXNpbmcgdmFyaWFuY2Ugb2YgcmFuZG9tIGludGVyY2VwdCBhbmQgcmFubWRvbSBzbG9wZSBvZiBpbXBvcnRhbmNlIHRvIGluY3JlYXNlIHJlc2lkdWFscw0KU3ViMiA8LWRpYWcoYyguNCwuMikpDQoNCiMgU2V0dGluZyBjb3YgYmV0d2VlbiBzbG9wZSBhbmQgaW50ZXJjZXB0DQpTdWIyW2xvd2VyLnRyaShTdWIpXSA8LSAuMDUNCg0KIyBTZXR0aW5nIHJlc2lkdWFsIHNkDQpzMiA8LSAoMS0oc3VtKFN1YjIpKSleLjUgDQoNCiMgRmluaXNoIFRyaWFuZ2xlIGZvciByYW5kb20gaXRlbXMNClN1YjJbdXBwZXIudHJpKFN1YjIpXSA8LSAuMDUNCg0KIyBHZW5lcmF0aW5nIHRoZSBzaW11bGF0aW9uIHVzaW5nIHRoZSB2YWx1ZXMgZ2VuZXJhdGVkIGZyb20gU2ltIDEgd2l0aCBpbmNyZWFzZWQgcmVzaWR1YWxzDQpTaW1JbnRlcjIgPC0gbWFrZUxtZXIoRFYgfiBpbXBjYXQrcmVsc3RyZW5ndGgrcmVsd2VhaytpbXBjYXQ6cmVsc3RyZW5ndGgraW1wY2F0OnJlbHdlYWsgKygxK2ltcGNhdHxTdWJqZWN0KSwgDQogICAgICAgICAgICAgICAgICAgICAgZml4ZWY9YjEsIFZhckNvcnI9bGlzdChTdWIyKSwgc2lnbWE9czIsIGRhdGE9WDNiKQ0KYGBgDQoNCg0KDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFN0cmVuZ3RoIEludGVyYWN0aW9uIDIgIyMjDQpTQ3VydmUxPC1wb3dlckN1cnZlKFNpbUludGVyMiwgZml4ZWQoImltcGNhdDpyZWxzdHJlbmd0aCIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTENCnBsb3QoU0N1cnZlMSkNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxXZWFrIEludGVyYWN0aW9uIDEgIyMjDQpTQ3VydmUyPC1wb3dlckN1cnZlKFNpbUludGVyMiwgZml4ZWQoImltcGNhdDpyZWx3ZWFrIiwgImxyIiksDQogICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgIG5zaW09NTAwLGFscGhhPS4wNDUsIHByb2dyZXNzPVRSVUUpDQpgYGANCg0KDQoNCmBgYHtyfQ0KU0N1cnZlMg0KcGxvdChTQ3VydmUyKQ0KDQpgYGANCg0KIyMgU2ltdWxhdGlvbiA1DQpJbiBNNSwgSSBmdXJ0aGVyIHJlZHVjZWQgdGhlIGFtb3VudCBvZiB2YXJpYW5jZSBhdHRyaWJ1dGFibGUgdG8gdGhlIHJhbmRvbSBpbnRlcmNlcHQgdG8gMC4yMC4gVGhpcyBtb2RlbCBhc3N1bWVzIHRoYXQgdGhlIG1ham9yaXR5IG9mIHRoZSByYW5kb20gdmFyaWFuY2UgaXMgYXR0cmlidXRhYmxlIHRvIHRoZSByZXNpZHVhbCBhbmQgaXMgdGhlcmVmb3JlIGxlZnQgdW5wcmVkaWN0ZWQgKDAuNTUpLiBIb3dldmVyLCB0aGUgcmFuZG9tIGludGVyY2VwdCBpcyBrZXB0IGFzIG9uZSBvZiB0aGUgbW9zdCBwcmVkaWN0aXZlIHNwZWNpZmllZCB0ZXJtIGluIHRoZSByYW5kb20gc3RydWN0dXJlLCBidXQgaW4gTTUgaXQgaXMgYXNzdW1lZCB0byBiZSBlcXVpdmFsZW50IHRvIHRoZSByYW5kb20gc2xvcGUgYmV0d2VlbiBnb2FsIGltcG9ydGFuY2UgYW5kIHRydXN0Lg0KDQpgYGB7cn0NCnNldC5zZWVkKDEwMTAxKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyBTaW11bGF0aW9uIDJiICMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIERlY3JlYXNpbmcgdmFyaWFuY2Ugb2YgcmFuZG9tIGludGVyY2VwdCBhbmQgcmFubWRvbSBzbG9wZSBvZiBpbXBvcnRhbmNlIHRvIGluY3JlYXNlIHJlc2lkdWFscw0KU3ViMmIgPC1kaWFnKGMoLjIsLjIpKQ0KDQojIFNldHRpbmcgY292IGJldHdlZW4gc2xvcGUgYW5kIGludGVyY2VwdA0KU3ViMmJbbG93ZXIudHJpKFN1YildIDwtIC4wNQ0KDQojIFNldHRpbmcgcmVzaWR1YWwgc2QNCnMyYiA8LSAoMS0oc3VtKFN1YjJiKSkpXi41IA0KIyBGaW5pc2ggVHJpYW5nbGUgZm9yIHJhbmRvbSBpdGVtcw0KU3ViMmJbdXBwZXIudHJpKFN1YjJiKV0gPC0gLjA1DQoNCiMgR2VuZXJhdGluZyB0aGUgc2ltdWxhdGlvbiB1c2luZyB0aGUgdmFsdWVzIGdlbmVyYXRlZCBmcm9tIFNpbSAxYg0KU2ltSW50ZXIyYiA8LSBtYWtlTG1lcihEViB+IGltcGNhdCtyZWxzdHJlbmd0aCtyZWx3ZWFrK2ltcGNhdDpyZWxzdHJlbmd0aCtpbXBjYXQ6cmVsd2VhayArKDEraW1wY2F0fFN1YmplY3QpLCANCiAgICAgICAgICAgICAgICAgICAgICBmaXhlZj1iMSwgVmFyQ29ycj1saXN0KFN1YjJiKSwgc2lnbWE9czJiLCBkYXRhPVgzYikNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxTdHJlbmd0aCBJbnRlcmFjdGlvbiAyICMjIw0KU0N1cnZlMWI8LXBvd2VyQ3VydmUoU2ltSW50ZXIyYiwgZml4ZWQoImltcGNhdDpyZWxzdHJlbmd0aCIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTFiDQpwbG90KFNDdXJ2ZTFiKQ0KYGBgDQoNCg0KDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFdlYWsgSW50ZXJhY3Rpb24gMSAjIyMNClNDdXJ2ZTJiPC1wb3dlckN1cnZlKFNpbUludGVyMmIsIGZpeGVkKCJpbXBjYXQ6cmVsd2VhayIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTJiDQpwbG90KFNDdXJ2ZTJiKQ0KYGBgDQoNCiMgVGhlIFN0dWR5IEdvZXMgdG8gSGVsbA0KDQojIyBTaW11bGF0aW9uIDYNCkluIG15IGZpbmFsIG1vZGVsIChNNiksIEkgdXNlIGFsbCBvZiB0aGUgcGFyYW1ldGVyIHNldHRpbmdzIHRoYXQgZGVjcmVhc2UgYSBwcmlvcmkgcG93ZXIuIFNwZWNpZmljYWxseSwgSSBzZXQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gbXkgcHJlZGljdG9ycyB0byBiZSAwLjgwLCBhbmQgSSBzZXQgbXkgcmVzaWR1YWwgdmFyaWFuY2UgdG8gYmUgMC41NSBieSBzZXR0aW5nIG15IHJhbmRvbSBpbnRlcmNlcHQgdGVybSBhdCAwLjIwLCBteSByYW5kb20gc2xvcGUgdGVybSBhdCAwLjIwLCBhbmQgdGhlIHZhcmlhbmNlIGF0dHJpYnV0ZWQgdG8gdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gbXkgcmFuZG9tIHNsb3BlIGFuZCBpbnRlcmNlcHQgYXQgMC4wNS4gVGhlIHBhcmFtZXRlcnMgb2YgTTYgYXJlIHVubGlrZWx5IGJlY2F1c2UgdGhleSBhc3N1bWUgdGhhdCB0aGUgZml4ZWQgZWZmZWN0cyBpbiBteSBzdHVkeSBhcmUgbm90IHByZWRpY3RpdmUgb2YgdHJ1c3QsIHRoYXQgcGFydGljaXBhbnRzIHdpbGwgdmlldyB0aGVpciBiZXN0IGZyaWVuZOKAmXMgc3RyZW5ndGggYW5kIHdlYWtuZXNzIGFzIGVxdWl2YWxlbnRseSByZWxldmFudCBhY3Jvc3MgZ29hbHMsIGFuZCB0aGF0IHRoZSByZXNpZHVhbCB2YXJpYW5jZSB3aWxsIGFjY291bnQgZm9yIDU1JSBvZiB0aGUgcmFuZG9tIHZhcmlhbmNlIChhcyBvcHBvc2VkIHRvIHRoZSBhdmVyYWdlIGxldmVsIG9mIHRydXN0IGJldHdlZW4gcGFydGljaXBhbnRzLCB0aGUgc2xvcGUgYmV0d2VlbiBnb2FsIGltcG9ydGFuY2UgYW5kIHRydXN0IGJldHdlZW4gcGFydGljaXBhbnRzLCBhbmQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlc2UgdHdvIHJhbmRvbSB0ZXJtcykuIFRoZXJlZm9yZSwgdGhpcyBtb2RlbOKAmXMgZXN0aW1hdGUgcmVwcmVzZW50cyBhIGxvd2VyIGJvdW5kIG9uIG15IGV4cGVjdGVkIHBvd2VyLg0KDQpgYGB7cn0NCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFNpbXVsYXRpb24gMyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMgIFNldHRpbmcgd2VhayBwcmVkaWN0b3IsIGhpZ2ggcmVzaWR1YWxzLCBhbmQgc3Ryb25nIHBvc2l0aXZlIGNvcnJlbGF0aW9uICAjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQojIEdlbmVyYXRpbmcgdGhlIHNpbXVsYXRpb24NClNpbUludGVyMyA8LSBtYWtlTG1lcihEViB+IGltcGNhdCtyZWxzdHJlbmd0aCtyZWx3ZWFrK2ltcGNhdDpyZWxzdHJlbmd0aCtpbXBjYXQ6cmVsd2VhayArKDEraW1wY2F0fFN1YmplY3QpLCANCiAgICAgICAgICAgICAgICAgICAgICBmaXhlZj1iMSwgVmFyQ29ycj1saXN0KFN1YjJiKSwgc2lnbWE9czJiLCBkYXRhPVgzYykNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxTdHJlbmd0aCBJbnRlcmFjdGlvbiAxICMjIw0KU0N1cnZlMzwtcG93ZXJDdXJ2ZShTaW1JbnRlcjMsIGZpeGVkKCJpbXBjYXQ6cmVsc3RyZW5ndGgiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUzDQpwbG90KFNDdXJ2ZTMpDQpgYGANCg0KDQoNCmBgYHtyLGVjaG89RkFMU0UscmVzdWx0cz0iaGlkZSJ9DQojIyMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgUmVsV2VhayBJbnRlcmFjdGlvbiAxICMjIw0KU0N1cnZlM2I8LXBvd2VyQ3VydmUoU2ltSW50ZXIzLCBmaXhlZCgiaW1wY2F0OnJlbHdlYWsiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUzYg0KcGxvdChTQ3VydmUzYikNCmBgYA0KDQoNCiMgR3JhcGhpbmcgcG93ZXIgb2YgTiA9IDQwMCBhY3Jvc3MgYWxsIHNpbXVsYXRpb25zDQpgYGB7cn0NClBvd2VyNDAwUzwtYygxMDAsIDEwMCwgODguOCwgOTIuNCwgODAuMiwgNDUpDQpQb3dlcjQwMHc8LWMoMTAwLCAxMDAsIDk5LjgsIDEwMCwgOTguNCwgNzgpDQpgYGANCg0KDQpIZXJlJ3MgdGhlIGV4cGVjdGVkIHBvd2VyIGF0IE4gPSA0MDAgZm9yIHRoZSBpbnRlcmFjdGlvbiBiZXR3ZWVuIHRoZSByZWxldmFuY2UgdG8gc3RyZW5ndGggYW5kIGltcG9ydGFuY2UgYWNyb3NzIGFsbCA2IHNpbXVsYXRpb25zLg0KYGBge3IsZWNobz1GQUxTRX0NCnBsb3QoUG93ZXI0MDBTLCB0eXBlPSAiYiIsIHhsYWI9IkV4cGVjdGVkIFBvd2VyIiwgeWxhYj0iU2ltdWxhdGlvbiIpDQpgYGANCg0KDQpBbmQgaGVyZSdzIHRoZSBleHBlY3RlZCBwb3dlciBhdCBOID0gNDAwIGZvciB0aGUgaW50ZXJhY3Rpb24gYmV0d2VlbiB0aGUgcmVsZXZhbmNlIHRvIHdlYWtuZXNzIGFuZCBpbXBvcnRhbmNlIGFjcm9zcyBhbGwgNiBzaW11bGF0aW9ucy4NCmBgYHtyLGVjaG89RkFMU0V9DQpwbG90KFBvd2VyNDAwdywgdHlwZT0gImIiLCB4bGFiPSJFeHBlY3RlZCBQb3dlciIsIHlsYWI9IlNpbXVsYXRpb24iKQ0KDQpgYGANCg0KTm90aWNlIHRoZSBzZWNvbmQgaW50ZXJhY3Rpb24gaGFzIG1vcmUgcG93ZXIgYXQgcHJldHR5IG11Y2ggZXZlcnkgc2ltdWxhdGlvbj8gVGhhdCdzIGJlY2F1c2Ugd2Ugc2V0IHRoZSBpbnRlcmFjdGlvbiBpbmNsdWRpbmcgdGhlIHJlbGV2YW5jZSB0byB3ZWFrbmVzcyB0byBiZSAqYiogPSAtMC4xNSB3aGVyZWFzIHdlIHNldCB0aGUgaW50ZXJhY3Rpb24gaW5jbHVkaW5nIHRoZSByZWxldmFuY2UgdG8gc3RyZW5ndGggdG8gYmUgKmIqID0gKzAuMTAuIFRoYXQgNS8xMDAgaW5jcmVhc2UgbWFkZSBhIGh1Z2UgZGlmZmVyZW5jZSE=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("simulation.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
