<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Simulating An RM Study</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Stats for Business
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="biz-stats_home.html">Overview</a>
    </li>
    <li class="dropdown-header">Probability &amp; Odds</li>
    <li class="dropdown-header">Inference, Description, &amp; Error</li>
    <li class="dropdown-header">Between Groups</li>
    <li class="dropdown-header">Repeated Measures</li>
    <li class="dropdown-header">Covariance</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data Manipulation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="melt_cast.html">Melting &amp; Casting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Research
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="simulation.html">Simulating An RM Study</a>
    </li>
    <li>
      <a href="dissertation.html">Contextual Trust Study</a>
    </li>
    <li>
      <a href="scientific_articles.html">Scientific Publications</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Timothy Carsel_6-17-2020.pdf">
    <span class="fa fa-file"></span>
     
  </a>
</li>
<li>
  <a href="mailto:timothy.carsel@gmail.com">
    <span class="fa fa-envelope"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/timcarsel/">
    <span class="fa fa-linkedin"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/TCarsel">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Simulating An RM Study</h1>

</div>


<p>Statistical power is a tricky and occasionally confusing thing. Defined as the probability of rejecting a false null hypothesis, statistical power is a function of the size of the effect of interest, the size of the sample, and the alpha cut-off.</p>
<p>For simple designs, such as a <em>t</em>-test, determining the power of a study is relatively straightforward: Identify the area of the comparison distribution that lies beyond the cut-point defined by alpha. However, for more complicated designs, like those involving repeated measures, determining the power of a study is much more convoluted. Oftentimes, it is necessary to repeatedly simulate the expected results of the study under a variety of conditions.</p>
<p>Below, I walk you through the simulations and power analyses for my dissertation. <br/><br/><br/><br/></p>
<div id="overview-of-variables" class="section level1">
<h1>Overview of Variables</h1>
<p>Here is the list of variables we will simulate:</p>
<ul>
<li>Criterion
<ul>
<li>Goal-Specific Trust (6 measurements for each participant)</li>
</ul></li>
<li>Predictors
<ul>
<li>Relevance of best friend’s strength to the goal (6 measurements for each participant)</li>
<li>Relevance of best friend’s weakness to the goal (6 measurements for each participant)</li>
<li>Categorical Measure of Goal importance of 6 Goals (2 levels: Most Important, Least Important) <br/><br/><br/><br/></li>
</ul></li>
</ul>
</div>
<div id="setting-the-initial-values" class="section level1">
<h1>Setting the Initial Values</h1>
<p>For our simulations, we will need to create a sample of generated data. Think of these as computer people who will act in the way we tell them to. These values stay the same throughout all of the simulations except where explicitly mentioned.</p>
<pre class="r"><code>########################################################
# Setting the seed so this is the same everytime       #
set.seed(10101)                                        #
# Setting the number of subjects to be 5k              #
n1=5000 # Make an even number                          #
# Creating a subject ID number                         #                 
Subject1 = rep(1:n1)                                   #
# Creating the number of repeated measures             #
Sessions1 = rep(1:6)                                   #
# Creates RM design                                    # 
X1 &lt;- expand.grid(Sessions=Sessions1,Subject=Subject1) #
# Add covariate                                        #
impcat&lt;-rep(c(-.5,.5),n1)                              #
X2&lt;-data.frame(impcat=impcat,X1)                       #
# Setting extremely weak relationships                 #
b1 &lt;- c(0,0,.05,-.05,.1,-.15)                          #
########################################################</code></pre>
<ul>
<li>In the code above, we created a sample of 5000 subjects (Ss) who each have 6 measurements of the criterion variable.</li>
<li>Then, we added a within-subjects covariate. In the case of my dissertation, I included a categorical measure of goal importance (Most Important, Least Important) to include in the random structure of the multilevel model.</li>
<li>Finally, I initialized the beta values for my eventual model, starting with the intercept, moving through the main effects, and ending with two, two-way interactions.</li>
</ul>
<p>As you can see, other than the last interaction, I set my expected betas to be pretty weak. This allowed me to have a conservative estimate of a priori power. <br/><br/><br/><br/></p>
</div>
<div id="changing-predictor-correlations" class="section level1">
<h1>Changing Predictor Correlations</h1>
<p>The degree to which a set of predictors covary affects your ability to reject a false null hypothesis (i.e., it affects your power). In these first three simulations, I am going to change the correlation among my predictors in a principled way and observe how that affects my power. <br/><br/><br/></p>
<div id="simulation-1" class="section level2">
<h2>Simulation 1</h2>
<p>In this first simulation, I will set the correlation between the relevance of the best friend’s strength to the goal (hereafter referred to as relevance of strength) and the relevance of the best friend’s weakness to the goal (heareafter referred to as relevance to weakness) to be weak and negative.</p>
<p>If people view others at least implicitly as a potential means to goal pursuit (Orehek et al., 2018), then they may differentiate their best friend’s strengths and weaknesses across goals. In other words, it is possible that people will view their friend’s strengths and weaknesses as relevant to different goal contexts. Therefore, in line with this reasoning, I set the correlation between the predictors in this first simulation to be weak and negative (-0.10).</p>
<pre class="r"><code>##########################################################
##########################################################
###################### Simulation 1 ######################
###  Setting weak predictor and changing correlations  ###
########## Correlation between predictors = -.1 ##########
##########################################################
# Setting weak negative
sigma &lt;- matrix(c(1,-.1,
                -.1,  1), ncol=2)

# Creating predictors
x &lt;- rmvnorm(n=n1, mean=c(0,0), sigma=sigma)

relstrength&lt;-x[,1]
relweak&lt;-x[,2]
# Checking correlation between predictors
cor(x)</code></pre>
<pre><code>##             [,1]        [,2]
## [1,]  1.00000000 -0.06656283
## [2,] -0.06656283  1.00000000</code></pre>
<pre class="r"><code># Creating dataframe
X3&lt;-data.frame(relstrength=relstrength,relweak=relweak,X2)

###############################
######## Simulation 1a ########
###############################
# Random intercept and random slope of importance
Sub &lt;-diag(c(.6,.2))

# Setting cov between slope and intercept
Sub[lower.tri(Sub)] &lt;- .05

# Setting residual variance
s &lt;- (1-(sum(Sub)))^.5 
# Checking
s # Residual s2=.15 </code></pre>
<pre><code>## [1] 0.3872983</code></pre>
<p>Let’s check to make sure the multiple R^2 of the model makes sense.</p>
<pre class="r"><code># Finish Triangle for random items
Sub[upper.tri(Sub)] &lt;- .05

# Generating the simulation
SimInter1 &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub), sigma=s, data=X3)

#Check sim
summary(SimInter1)

# Check R2 - extract one model fit
Test.Data&lt;-getData(SimInter1)

# Checking the fixed R2 for the predictor
R2.test&lt;-r.squaredGLMM(SimInter1)
R2.test[,1] # 1.7%</code></pre>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: 
## DV ~ impcat + relstrength + relweak + impcat:relstrength + impcat:relweak +  
##     (1 + impcat | Subject)
##    Data: X3
## 
## REML criterion at convergence: 42117.5
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.0017 -0.5620  0.0052  0.5621  3.2168 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  Subject  (Intercept) 0.60     0.7746       
##           impcat      0.20     0.4472   0.14
##  Residual             0.15     0.3873       
## Number of obs: 30000, groups:  Subject, 5000
## 
## Fixed effects:
##                     Estimate Std. Error t value
## (Intercept)         0.000000   0.011181    0.00
## impcat              0.000000   0.007747    0.00
## relstrength         0.050000   0.002620   19.08
## relweak            -0.050000   0.002631  -19.00
## impcat:relstrength  0.100000   0.005223   19.15
## impcat:relweak     -0.150000   0.005270  -28.46
## 
## Correlation of Fixed Effects:
##             (Intr) impcat rlstrn relwek impct:rls
## impcat       0.116                               
## relstrength -0.002 -0.015                        
## relweak     -0.002 -0.010  0.061                 
## impct:rlstr -0.005 -0.005  0.013  0.000          
## impcat:rlwk -0.004 -0.005 -0.003 -0.016  0.063   
##       R2m 
## 0.0173314</code></pre>
<p>Here’s the effect size in Rho.</p>
<pre class="r"><code># Rho
R2.test[,1]^.5</code></pre>
<pre><code>##       R2m 
## 0.1316488</code></pre>
<p>And in Cohen’s <em>d</em>.</p>
<pre class="r"><code># Cohen&#39;s d 
d= (2*R2.test[,1]^.5) / (1-R2.test[,1])^.5
d # .27</code></pre>
<pre><code>##       R2m 
## 0.2656093</code></pre>
<p>Now, let’s extract one sample of the simulation and run our analysis on it to ensure it’s working properly.</p>
<pre class="r"><code># Extracting test data to run sample primary analysis
Test.Data&lt;-getData(SimInter1)

# Sample primary analysis
T1&lt;-lmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject),
         data=Test.Data, REML=F)
summary(T1)</code></pre>
<pre><code>## Linear mixed model fit by maximum likelihood  [&#39;lmerMod&#39;]
## Formula: 
## DV ~ impcat + relstrength + relweak + impcat:relstrength + impcat:relweak +  
##     (1 + impcat | Subject)
##    Data: Test.Data
## 
##      AIC      BIC   logLik deviance df.resid 
##  37366.4  37449.5 -18673.2  37346.4    29990 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -3.2988 -0.6156  0.0047  0.6182  3.6003 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr
##  Subject  (Intercept) 0.09009  0.3001       
##           impcat      0.03380  0.1839   0.18
##  Residual             0.15040  0.3878       
## Number of obs: 30000, groups:  Subject, 5000
## 
## Fixed effects:
##                     Estimate Std. Error t value
## (Intercept)         0.002219   0.004800   0.462
## impcat             -0.009632   0.005180  -1.859
## relstrength         0.051483   0.002466  20.879
## relweak            -0.052046   0.002467 -21.096
## impcat:relstrength  0.097427   0.004905  19.861
## impcat:relweak     -0.161575   0.004946 -32.670
## 
## Correlation of Fixed Effects:
##             (Intr) impcat rlstrn relwek impct:rls
## impcat       0.081                               
## relstrength -0.004 -0.022                        
## relweak     -0.004 -0.014  0.062                 
## impct:rlstr -0.012 -0.007  0.021  0.002          
## impcat:rlwk -0.008 -0.007 -0.002 -0.008  0.066</code></pre>
<p>Yep. That went the way we expected it!</p>
<p>Here’s the expected relationship between the relevance to strength and importance on interpersonal trust. <img src="simulation_files/figure-html/unnamed-chunk-9-1.png" width=".49\linewidth" style="display: block; margin: auto;" /></p>
<p>Here’s the expected power at N = 100, 150, 200, 250, 300, 400, and 500 for the interaction.</p>
<pre class="r"><code>SCurve1
plot(SCurve1)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-11-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 78.00% (74.11, 81.56) - 600 rows
##     150: 92.20% (89.49, 94.39) - 900 rows
##     200: 97.80% (96.10, 98.90) - 1200 rows
##     250: 99.40% (98.26, 99.88) - 1500 rows
##     300: 99.80% (98.89, 99.99) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 21 m 24 s</code></pre>
<p>And here’s the expected relationship between the relevance to weakness and importance on interpersonal trust. <img src="simulation_files/figure-html/unnamed-chunk-12-1.png" width=".49\linewidth" style="display: block; margin: auto;" /></p>
<p>Here’s the expected power at N = 100, 150, 200, 250, 300, 400, and 500 for the interaction.</p>
<pre class="r"><code>SCurve2
plot(SCurve2)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-14-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 97.80% (96.10, 98.90) - 600 rows
##     150: 100.0% (99.26, 100.0) - 900 rows
##     200: 100.0% (99.26, 100.0) - 1200 rows
##     250: 100.0% (99.26, 100.0) - 1500 rows
##     300: 100.0% (99.26, 100.0) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 20 m 54 s</code></pre>
<p><br/><br/><br/></p>
</div>
<div id="simulation-2" class="section level2">
<h2>Simulation 2</h2>
<p>In contrast to the potential situation just characterized, whereby people were expected to view their friend’s strengths and weaknesses as weakly and negative related, the next simulation estimates the effect of friend attributes’ goal relevance being positive correlated. In the study’s design, participants were first asked to identify and describe their personal projects and then to identify and describe their best friend. Therefore, the methods pressed for participants to imagine their personal projects, free from whom they may choose to rely upon. Consequently, it seemed possible that the same constellation of friend attributes may be perceived as both a strength and a weakness and relevant to similar situations. For example, perhaps Tim believes that Andy is a “free spirit.” Consequently, he may believe that Andy’s biggest strength is that he is good at generating novel solutions to problems, but Tim may believe Andy’s greatest weakness is that he is unreliable. To model this potential outcome in Simulation 2, I set a moderate and positive (0.40) correlation between the relevance of the best friends’ strengths and weaknesses to the goal.</p>
<pre class="r"><code># Resetting seed
set.seed(10101)

###############################
######## Simulation 1b ########
###############################
# Setting strong positive relationship between predictors
## to control for potential effect of collinearity on power
sigma1b &lt;- matrix(c(1,.4,
                  .4 ,1), ncol=2)
# Creating predictors
x2b &lt;- rmvnorm(n=n1, mean=c(0,0), sigma=sigma1b)

# Creating new predictors with strong positive correlation
relstrength1b&lt;-x2b[,1]
relweak1b&lt;-x2b[,2]

# Creating new dataframe
X3b&lt;-data.frame(relstrength=relstrength1b,relweak=relweak1b,X2)

# Generates the simulation
SimInter1b &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub), sigma=s, data=X3b)

### Power simulation for RelStrength Interaction 1b ###
SCurve1b&lt;-powerCurve(SimInter1b, fixed(&quot;impcat:relstrength&quot;, &quot;lr&quot;),
                    along = &quot;Subject&quot;,
                    breaks = c(100,150,200,250,300,400,500),
                    nsim=500,alpha=.045, progress=TRUE)</code></pre>
<pre><code>## Simulating: |                                                                  |Simulating: |=                                                                 |Simulating: |==                                                                |Simulating: |===                                                               |Simulating: |====                                                              |Simulating: |=====                                                             |Simulating: |======                                                            |Simulating: |=======                                                           |Simulating: |========                                                          |Simulating: |=========                                                         |Simulating: |==========                                                        |Simulating: |===========                                                       |Simulating: |============                                                      |Simulating: |=============                                                     |Simulating: |==============                                                    |Simulating: |===============                                                   |Simulating: |================                                                  |Simulating: |=================                                                 |Simulating: |==================                                                |Simulating: |===================                                               |Simulating: |====================                                              |Simulating: |=====================                                             |Simulating: |======================                                            |Simulating: |=======================                                           |Simulating: |========================                                          |Simulating: |=========================                                         |Simulating: |==========================                                        |Simulating: |===========================                                       |Simulating: |============================                                      |Simulating: |=============================                                     |Simulating: |==============================                                    |Simulating: |===============================                                   |Simulating: |================================                                  |Simulating: |=================================                                 |Simulating: |==================================                                |Simulating: |===================================                               |Simulating: |====================================                              |Simulating: |=====================================                             |Simulating: |======================================                            |Simulating: |=======================================                           |Simulating: |========================================                          |Simulating: |=========================================                         |Simulating: |==========================================                        |Simulating: |===========================================                       |Simulating: |============================================                      |Simulating: |=============================================                     |Simulating: |==============================================                    |Simulating: |===============================================                   |Simulating: |================================================                  |Simulating: |=================================================                 |Simulating: |==================================================                |Simulating: |===================================================               |Simulating: |====================================================              |Simulating: |=====================================================             |Simulating: |======================================================            |Simulating: |=======================================================           |Simulating: |========================================================          |Simulating: |=========================================================         |Simulating: |==========================================================        |Simulating: |===========================================================       |Simulating: |============================================================      |Simulating: |=============================================================     |Simulating: |==============================================================    |Simulating: |===============================================================   |Simulating: |================================================================  |Simulating: |================================================================= |Simulating: |==================================================================|(1/7) (1/7) Simulating: |                                                            |(1/7) Simulating: |=                                                           |(1/7) Simulating: |==                                                          |(1/7) Simulating: |===                                                         |(1/7) Simulating: |====                                                        |(1/7) Simulating: |=====                                                       |(1/7) Simulating: |======                                                      |(1/7) Simulating: |=======                                                     |(1/7) Simulating: |========                                                    |(1/7) Simulating: |=========                                                   |(1/7) Simulating: |==========                                                  |(1/7) Simulating: |===========                                                 |(1/7) Simulating: |============                                                |(1/7) Simulating: |=============                                               |(1/7) Simulating: |==============                                              |(1/7) Simulating: |===============                                             |(1/7) Simulating: |================                                            |(1/7) Simulating: |=================                                           |(1/7) Simulating: |==================                                          |(1/7) Simulating: |===================                                         |(1/7) Simulating: |====================                                        |(1/7) Simulating: |=====================                                       |(1/7) Simulating: |======================                                      |(1/7) Simulating: |=======================                                     |(1/7) Simulating: |========================                                    |(1/7) Simulating: |=========================                                   |(1/7) Simulating: |==========================                                  |(1/7) Simulating: |===========================                                 |(1/7) Simulating: |============================                                |(1/7) Simulating: |=============================                               |(1/7) Simulating: |==============================                              |(1/7) Simulating: |===============================                             |(1/7) Simulating: |================================                            |(1/7) Simulating: |=================================                           |(1/7) Simulating: |==================================                          |(1/7) Simulating: |===================================                         |(1/7) Simulating: |====================================                        |(1/7) Simulating: |=====================================                       |(1/7) Simulating: |======================================                      |(1/7) Simulating: |=======================================                     |(1/7) Simulating: |========================================                    |(1/7) Simulating: |=========================================                   |(1/7) Simulating: |==========================================                  |(1/7) Simulating: |===========================================                 |(1/7) Simulating: |============================================                |(1/7) Simulating: |=============================================               |(1/7) Simulating: |==============================================              |(1/7) Simulating: |===============================================             |(1/7) Simulating: |================================================            |(1/7) Simulating: |=================================================           |(1/7) Simulating: |==================================================          |(1/7) Simulating: |===================================================         |(1/7) Simulating: |====================================================        |(1/7) Simulating: |=====================================================       |(1/7) Simulating: |======================================================      |(1/7) Simulating: |=======================================================     |(1/7) Simulating: |========================================================    |(1/7) Simulating: |=========================================================   |(1/7) Simulating: |==========================================================  |(1/7) Simulating: |=========================================================== |(1/7) Simulating: |============================================================|(1/7) (2/7) (2/7) Simulating: |                                                            |(2/7) Simulating: |=                                                           |(2/7) Simulating: |==                                                          |(2/7) Simulating: |===                                                         |(2/7) Simulating: |====                                                        |(2/7) Simulating: |=====                                                       |(2/7) Simulating: |======                                                      |(2/7) Simulating: |=======                                                     |(2/7) Simulating: |========                                                    |(2/7) Simulating: |=========                                                   |(2/7) Simulating: |==========                                                  |(2/7) Simulating: |===========                                                 |(2/7) Simulating: |============                                                |(2/7) Simulating: |=============                                               |(2/7) Simulating: |==============                                              |(2/7) Simulating: |===============                                             |(2/7) Simulating: |================                                            |(2/7) Simulating: |=================                                           |(2/7) Simulating: |==================                                          |(2/7) Simulating: |===================                                         |(2/7) Simulating: |====================                                        |(2/7) Simulating: |=====================                                       |(2/7) Simulating: |======================                                      |(2/7) Simulating: |=======================                                     |(2/7) Simulating: |========================                                    |(2/7) Simulating: |=========================                                   |(2/7) Simulating: |==========================                                  |(2/7) Simulating: |===========================                                 |(2/7) Simulating: |============================                                |(2/7) Simulating: |=============================                               |(2/7) Simulating: |==============================                              |(2/7) Simulating: |===============================                             |(2/7) Simulating: |================================                            |(2/7) Simulating: |=================================                           |(2/7) Simulating: |==================================                          |(2/7) Simulating: |===================================                         |(2/7) Simulating: |====================================                        |(2/7) Simulating: |=====================================                       |(2/7) Simulating: |======================================                      |(2/7) Simulating: |=======================================                     |(2/7) Simulating: |========================================                    |(2/7) Simulating: |=========================================                   |(2/7) Simulating: |==========================================                  |(2/7) Simulating: |===========================================                 |(2/7) Simulating: |============================================                |(2/7) Simulating: |=============================================               |(2/7) Simulating: |==============================================              |(2/7) Simulating: |===============================================             |(2/7) Simulating: |================================================            |(2/7) Simulating: |=================================================           |(2/7) Simulating: |==================================================          |(2/7) Simulating: |===================================================         |(2/7) Simulating: |====================================================        |(2/7) Simulating: |=====================================================       |(2/7) Simulating: |======================================================      |(2/7) Simulating: |=======================================================     |(2/7) Simulating: |========================================================    |(2/7) Simulating: |=========================================================   |(2/7) Simulating: |==========================================================  |(2/7) Simulating: |=========================================================== |(2/7) Simulating: |============================================================|(2/7) (3/7) (3/7) Simulating: |                                                            |(3/7) Simulating: |=                                                           |(3/7) Simulating: |==                                                          |(3/7) Simulating: |===                                                         |(3/7) Simulating: |====                                                        |(3/7) Simulating: |=====                                                       |(3/7) Simulating: |======                                                      |(3/7) Simulating: |=======                                                     |(3/7) Simulating: |========                                                    |(3/7) Simulating: |=========                                                   |(3/7) Simulating: |==========                                                  |(3/7) Simulating: |===========                                                 |(3/7) Simulating: |============                                                |(3/7) Simulating: |=============                                               |(3/7) Simulating: |==============                                              |(3/7) Simulating: |===============                                             |(3/7) Simulating: |================                                            |(3/7) Simulating: |=================                                           |(3/7) Simulating: |==================                                          |(3/7) Simulating: |===================                                         |(3/7) Simulating: |====================                                        |(3/7) Simulating: |=====================                                       |(3/7) Simulating: |======================                                      |(3/7) Simulating: |=======================                                     |(3/7) Simulating: |========================                                    |(3/7) Simulating: |=========================                                   |(3/7) Simulating: |==========================                                  |(3/7) Simulating: |===========================                                 |(3/7) Simulating: |============================                                |(3/7) Simulating: |=============================                               |(3/7) Simulating: |==============================                              |(3/7) Simulating: |===============================                             |(3/7) Simulating: |================================                            |(3/7) Simulating: |=================================                           |(3/7) Simulating: |==================================                          |(3/7) Simulating: |===================================                         |(3/7) Simulating: |====================================                        |(3/7) Simulating: |=====================================                       |(3/7) Simulating: |======================================                      |(3/7) Simulating: |=======================================                     |(3/7) Simulating: |========================================                    |(3/7) Simulating: |=========================================                   |(3/7) Simulating: |==========================================                  |(3/7) Simulating: |===========================================                 |(3/7) Simulating: |============================================                |(3/7) Simulating: |=============================================               |(3/7) Simulating: |==============================================              |(3/7) Simulating: |===============================================             |(3/7) Simulating: |================================================            |(3/7) Simulating: |=================================================           |(3/7) Simulating: |==================================================          |(3/7) Simulating: |===================================================         |(3/7) Simulating: |====================================================        |(3/7) Simulating: |=====================================================       |(3/7) Simulating: |======================================================      |(3/7) Simulating: |=======================================================     |(3/7) Simulating: |========================================================    |(3/7) Simulating: |=========================================================   |(3/7) Simulating: |==========================================================  |(3/7) Simulating: |=========================================================== |(3/7) Simulating: |============================================================|(3/7) (4/7) (4/7) Simulating: |                                                            |(4/7) Simulating: |=                                                           |(4/7) Simulating: |==                                                          |(4/7) Simulating: |===                                                         |(4/7) Simulating: |====                                                        |(4/7) Simulating: |=====                                                       |(4/7) Simulating: |======                                                      |(4/7) Simulating: |=======                                                     |(4/7) Simulating: |========                                                    |(4/7) Simulating: |=========                                                   |(4/7) Simulating: |==========                                                  |(4/7) Simulating: |===========                                                 |(4/7) Simulating: |============                                                |(4/7) Simulating: |=============                                               |(4/7) Simulating: |==============                                              |(4/7) Simulating: |===============                                             |(4/7) Simulating: |================                                            |(4/7) Simulating: |=================                                           |(4/7) Simulating: |==================                                          |(4/7) Simulating: |===================                                         |(4/7) Simulating: |====================                                        |(4/7) Simulating: |=====================                                       |(4/7) Simulating: |======================                                      |(4/7) Simulating: |=======================                                     |(4/7) Simulating: |========================                                    |(4/7) Simulating: |=========================                                   |(4/7) Simulating: |==========================                                  |(4/7) Simulating: |===========================                                 |(4/7) Simulating: |============================                                |(4/7) Simulating: |=============================                               |(4/7) Simulating: |==============================                              |(4/7) Simulating: |===============================                             |(4/7) Simulating: |================================                            |(4/7) Simulating: |=================================                           |(4/7) Simulating: |==================================                          |(4/7) Simulating: |===================================                         |(4/7) Simulating: |====================================                        |(4/7) Simulating: |=====================================                       |(4/7) Simulating: |======================================                      |(4/7) Simulating: |=======================================                     |(4/7) Simulating: |========================================                    |(4/7) Simulating: |=========================================                   |(4/7) Simulating: |==========================================                  |(4/7) Simulating: |===========================================                 |(4/7) Simulating: |============================================                |(4/7) Simulating: |=============================================               |(4/7) Simulating: |==============================================              |(4/7) Simulating: |===============================================             |(4/7) Simulating: |================================================            |(4/7) Simulating: |=================================================           |(4/7) Simulating: |==================================================          |(4/7) Simulating: |===================================================         |(4/7) Simulating: |====================================================        |(4/7) Simulating: |=====================================================       |(4/7) Simulating: |======================================================      |(4/7) Simulating: |=======================================================     |(4/7) Simulating: |========================================================    |(4/7) Simulating: |=========================================================   |(4/7) Simulating: |==========================================================  |(4/7) Simulating: |=========================================================== |(4/7) Simulating: |============================================================|(4/7) (5/7) (5/7) Simulating: |                                                            |(5/7) Simulating: |=                                                           |(5/7) Simulating: |==                                                          |(5/7) Simulating: |===                                                         |(5/7) Simulating: |====                                                        |(5/7) Simulating: |=====                                                       |(5/7) Simulating: |======                                                      |(5/7) Simulating: |=======                                                     |(5/7) Simulating: |========                                                    |(5/7) Simulating: |=========                                                   |(5/7) Simulating: |==========                                                  |(5/7) Simulating: |===========                                                 |(5/7) Simulating: |============                                                |(5/7) Simulating: |=============                                               |(5/7) Simulating: |==============                                              |(5/7) Simulating: |===============                                             |(5/7) Simulating: |================                                            |(5/7) Simulating: |=================                                           |(5/7) Simulating: |==================                                          |(5/7) Simulating: |===================                                         |(5/7) Simulating: |====================                                        |(5/7) Simulating: |=====================                                       |(5/7) Simulating: |======================                                      |(5/7) Simulating: |=======================                                     |(5/7) Simulating: |========================                                    |(5/7) Simulating: |=========================                                   |(5/7) Simulating: |==========================                                  |(5/7) Simulating: |===========================                                 |(5/7) Simulating: |============================                                |(5/7) Simulating: |=============================                               |(5/7) Simulating: |==============================                              |(5/7) Simulating: |===============================                             |(5/7) Simulating: |================================                            |(5/7) Simulating: |=================================                           |(5/7) Simulating: |==================================                          |(5/7) Simulating: |===================================                         |(5/7) Simulating: |====================================                        |(5/7) Simulating: |=====================================                       |(5/7) Simulating: |======================================                      |(5/7) Simulating: |=======================================                     |(5/7) Simulating: |========================================                    |(5/7) Simulating: |=========================================                   |(5/7) Simulating: |==========================================                  |(5/7) Simulating: |===========================================                 |(5/7) Simulating: |============================================                |(5/7) Simulating: |=============================================               |(5/7) Simulating: |==============================================              |(5/7) Simulating: |===============================================             |(5/7) Simulating: |================================================            |(5/7) Simulating: |=================================================           |(5/7) Simulating: |==================================================          |(5/7) Simulating: |===================================================         |(5/7) Simulating: |====================================================        |(5/7) Simulating: |=====================================================       |(5/7) Simulating: |======================================================      |(5/7) Simulating: |=======================================================     |(5/7) Simulating: |========================================================    |(5/7) Simulating: |=========================================================   |(5/7) Simulating: |==========================================================  |(5/7) Simulating: |=========================================================== |(5/7) Simulating: |============================================================|(5/7) (6/7) (6/7) Simulating: |                                                            |(6/7) Simulating: |=                                                           |(6/7) Simulating: |==                                                          |(6/7) Simulating: |===                                                         |(6/7) Simulating: |====                                                        |(6/7) Simulating: |=====                                                       |(6/7) Simulating: |======                                                      |(6/7) Simulating: |=======                                                     |(6/7) Simulating: |========                                                    |(6/7) Simulating: |=========                                                   |(6/7) Simulating: |==========                                                  |(6/7) Simulating: |===========                                                 |(6/7) Simulating: |============                                                |(6/7) Simulating: |=============                                               |(6/7) Simulating: |==============                                              |(6/7) Simulating: |===============                                             |(6/7) Simulating: |================                                            |(6/7) Simulating: |=================                                           |(6/7) Simulating: |==================                                          |(6/7) Simulating: |===================                                         |(6/7) Simulating: |====================                                        |(6/7) Simulating: |=====================                                       |(6/7) Simulating: |======================                                      |(6/7) Simulating: |=======================                                     |(6/7) Simulating: |========================                                    |(6/7) Simulating: |=========================                                   |(6/7) Simulating: |==========================                                  |(6/7) Simulating: |===========================                                 |(6/7) Simulating: |============================                                |(6/7) Simulating: |=============================                               |(6/7) Simulating: |==============================                              |(6/7) Simulating: |===============================                             |(6/7) Simulating: |================================                            |(6/7) Simulating: |=================================                           |(6/7) Simulating: |==================================                          |(6/7) Simulating: |===================================                         |(6/7) Simulating: |====================================                        |(6/7) Simulating: |=====================================                       |(6/7) Simulating: |======================================                      |(6/7) Simulating: |=======================================                     |(6/7) Simulating: |========================================                    |(6/7) Simulating: |=========================================                   |(6/7) Simulating: |==========================================                  |(6/7) Simulating: |===========================================                 |(6/7) Simulating: |============================================                |(6/7) Simulating: |=============================================               |(6/7) Simulating: |==============================================              |(6/7) Simulating: |===============================================             |(6/7) Simulating: |================================================            |(6/7) Simulating: |=================================================           |(6/7) Simulating: |==================================================          |(6/7) Simulating: |===================================================         |(6/7) Simulating: |====================================================        |(6/7) Simulating: |=====================================================       |(6/7) Simulating: |======================================================      |(6/7) Simulating: |=======================================================     |(6/7) Simulating: |========================================================    |(6/7) Simulating: |=========================================================   |(6/7) Simulating: |==========================================================  |(6/7) Simulating: |=========================================================== |(6/7) Simulating: |============================================================|(6/7) (7/7) (7/7) Simulating: |                                                            |(7/7) Simulating: |=                                                           |(7/7) Simulating: |==                                                          |(7/7) Simulating: |===                                                         |(7/7) Simulating: |====                                                        |(7/7) Simulating: |=====                                                       |(7/7) Simulating: |======                                                      |(7/7) Simulating: |=======                                                     |(7/7) Simulating: |========                                                    |(7/7) Simulating: |=========                                                   |(7/7) Simulating: |==========                                                  |(7/7) Simulating: |===========                                                 |(7/7) Simulating: |============                                                |(7/7) Simulating: |=============                                               |(7/7) Simulating: |==============                                              |(7/7) Simulating: |===============                                             |(7/7) Simulating: |================                                            |(7/7) Simulating: |=================                                           |(7/7) Simulating: |==================                                          |(7/7) Simulating: |===================                                         |(7/7) Simulating: |====================                                        |(7/7) Simulating: |=====================                                       |(7/7) Simulating: |======================                                      |(7/7) Simulating: |=======================                                     |(7/7) Simulating: |========================                                    |(7/7) Simulating: |=========================                                   |(7/7) Simulating: |==========================                                  |(7/7) Simulating: |===========================                                 |(7/7) Simulating: |============================                                |(7/7) Simulating: |=============================                               |(7/7) Simulating: |==============================                              |(7/7) Simulating: |===============================                             |(7/7) Simulating: |================================                            |(7/7) Simulating: |=================================                           |(7/7) Simulating: |==================================                          |(7/7) Simulating: |===================================                         |(7/7) Simulating: |====================================                        |(7/7) Simulating: |=====================================                       |(7/7) Simulating: |======================================                      |(7/7) Simulating: |=======================================                     |(7/7) Simulating: |========================================                    |(7/7) Simulating: |=========================================                   |(7/7) Simulating: |==========================================                  |(7/7) Simulating: |===========================================                 |(7/7) Simulating: |============================================                |(7/7) Simulating: |=============================================               |(7/7) Simulating: |==============================================              |(7/7) Simulating: |===============================================             |(7/7) Simulating: |================================================            |(7/7) Simulating: |=================================================           |(7/7) Simulating: |==================================================          |(7/7) Simulating: |===================================================         |(7/7) Simulating: |====================================================        |(7/7) Simulating: |=====================================================       |(7/7) Simulating: |======================================================      |(7/7) Simulating: |=======================================================     |(7/7) Simulating: |========================================================    |(7/7) Simulating: |=========================================================   |(7/7) Simulating: |==========================================================  |(7/7) Simulating: |=========================================================== |(7/7) Simulating: |============================================================|(7/7) </code></pre>
<pre class="r"><code>SCurve1b
plot(SCurve1b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-16-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 71.40% (67.22, 75.32) - 600 rows
##     150: 89.00% (85.92, 91.61) - 900 rows
##     200: 95.40% (93.18, 97.06) - 1200 rows
##     250: 98.60% (97.14, 99.44) - 1500 rows
##     300: 99.00% (97.68, 99.67) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 22 m 33 s</code></pre>
<pre class="r"><code>SCurve2b
plot(SCurve2b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-18-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 95.40% (93.18, 97.06) - 600 rows
##     150: 99.40% (98.26, 99.88) - 900 rows
##     200: 100.0% (99.26, 100.0) - 1200 rows
##     250: 100.0% (99.26, 100.0) - 1500 rows
##     300: 100.0% (99.26, 100.0) - 1800 rows
##     400: 100.0% (99.26, 100.0) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 21 m 0 s</code></pre>
<p><br/><br/><br/></p>
</div>
<div id="simulation-3" class="section level2">
<h2>Simulation 3</h2>
<p>In Simulation 3, I set a strong and positive (0.80) correlation between the relevance of the best friends’ strengths and weaknesses to the goal. This would be a worst-case scenario, not simply because of multicollinearity issues but because my predictions the effect of the relevance to strength and relevance to weakness on trust were in the opposite directions. Consequently, if Simulation 3 was true, then my hypotheses would certainly not be supported.</p>
<pre class="r"><code>set.seed(10101)

###############################
######## Simulation 1c ########
###############################
# Setting very strong positive relationship between predictors
sigma1c &lt;- matrix(c(1,.8,
                   .8, 1), ncol=2)
# Creating new predictors
x2c &lt;- rmvnorm(n=n1, mean=c(0,0), sigma=sigma1c)
relstrength1c&lt;-x2c[,1]
relweak1c&lt;-x2c[,2]

# Create dataframe
X3c&lt;-data.frame(relstrength=relstrength1c,relweak=relweak1c,X2)


# Generates the simulation
SimInter1c &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub), sigma=s, data=X3c)</code></pre>
<pre class="r"><code>SCurve1c
plot(SCurve1c)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-21-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 37.40% (33.14, 41.81) - 600 rows
##     150: 49.40% (44.93, 53.87) - 900 rows
##     200: 61.20% (56.77, 65.49) - 1200 rows
##     250: 74.00% (69.92, 77.79) - 1500 rows
##     300: 80.20% (76.43, 83.61) - 1800 rows
##     400: 88.80% (85.70, 91.43) - 2400 rows
##     500: 95.20% (92.94, 96.90) - 3000 rows
## 
## Time elapsed: 0 h 24 m 40 s</code></pre>
<pre class="r"><code>SCurve2C
plot(SCurve2C)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-23-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 64.40% (60.03, 68.60) - 600 rows
##     150: 84.00% (80.49, 87.10) - 900 rows
##     200: 92.20% (89.49, 94.39) - 1200 rows
##     250: 96.60% (94.61, 98.01) - 1500 rows
##     300: 98.60% (97.14, 99.44) - 1800 rows
##     400: 99.80% (98.89, 99.99) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 20 m 9 s</code></pre>
<p><br/><br/><br/><br/></p>
</div>
</div>
<div id="increasing-the-residual-variance" class="section level1">
<h1>Increasing the Residual Variance</h1>
<p>The second two simulations (M4, M5) modeled the effect of increasing the residual variance in the models on a priori power. Specifically, the total random variance was set to 1 and was allocated between the variance attributed to the random intercept, the random slope, the correlation between the random intercept and the slope, and the residual. In the first three models a large proportion of the variance was attributed to the random intercept (0.60), followed by the random slope (0.20), the residual (0.15), and the correlation between the random intercept and the slope (0.05). This specification assumes that much of the variability in trust is attributable to the individual’s general level of trust for their best friend. In other words, these models account for the fact that people really do tend to trust at varying levels (e.g., Rotter, 1980). <br/><br/><br/></p>
<div id="simulation-4" class="section level2">
<h2>Simulation 4</h2>
<p>In M4, the amount of variance attributed to the random intercept was decreased to 0.40. Because the random intercept was allocated most of the random variance, it was the easiest term to reduce while ensuring interpretability between previous models. Moreover, it’s initial setting represented the more unrealistic parameter setting because it assumed 60% of the random variance was attributable to average levels of trust between individuals. The result of this change was that the residual variance was increased from 0.15 to 0.35 for M4.</p>
<pre class="r"><code>set.seed(10101)

###############################
######## Simulation 2a ########
###############################
# Decreasing variance of random intercept and ranmdom slope of importance to increase residuals
Sub2 &lt;-diag(c(.4,.2))

# Setting cov between slope and intercept
Sub2[lower.tri(Sub)] &lt;- .05

# Setting residual sd
s2 &lt;- (1-(sum(Sub2)))^.5 

# Finish Triangle for random items
Sub2[upper.tri(Sub2)] &lt;- .05

# Generating the simulation using the values generated from Sim 1 with increased residuals
SimInter2 &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub2), sigma=s2, data=X3b)</code></pre>
<pre class="r"><code>SCurve1
plot(SCurve1)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-26-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 35.20% (31.01, 39.56) - 600 rows
##     150: 51.00% (46.52, 55.46) - 900 rows
##     200: 64.00% (59.62, 68.21) - 1200 rows
##     250: 72.60% (68.46, 76.47) - 1500 rows
##     300: 80.00% (76.22, 83.42) - 1800 rows
##     400: 91.60% (88.82, 93.88) - 2400 rows
##     500: 96.40% (94.37, 97.85) - 3000 rows
## 
## Time elapsed: 0 h 21 m 39 s</code></pre>
<pre class="r"><code>SCurve2
plot(SCurve2)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-28-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 66.60% (62.28, 70.73) - 600 rows
##     150: 86.00% (82.65, 88.92) - 900 rows
##     200: 94.20% (91.78, 96.08) - 1200 rows
##     250: 97.00% (95.10, 98.31) - 1500 rows
##     300: 98.80% (97.41, 99.56) - 1800 rows
##     400: 99.80% (98.89, 99.99) - 2400 rows
##     500: 100.0% (99.26, 100.0) - 3000 rows
## 
## Time elapsed: 0 h 21 m 52 s</code></pre>
<p><br/><br/><br/></p>
</div>
<div id="simulation-5" class="section level2">
<h2>Simulation 5</h2>
<p>In M5, I further reduced the amount of variance attributable to the random intercept to 0.20. This model assumes that the majority of the random variance is attributable to the residual and is therefore left unpredicted (0.55). However, the random intercept is kept as one of the most predictive specified term in the random structure, but in M5 it is assumed to be equivalent to the random slope between goal importance and trust.</p>
<pre class="r"><code>set.seed(10101)

###############################
######## Simulation 2b ########
###############################
# Decreasing variance of random intercept and ranmdom slope of importance to increase residuals
Sub2b &lt;-diag(c(.2,.2))

# Setting cov between slope and intercept
Sub2b[lower.tri(Sub)] &lt;- .05

# Setting residual sd
s2b &lt;- (1-(sum(Sub2b)))^.5 
# Finish Triangle for random items
Sub2b[upper.tri(Sub2b)] &lt;- .05

# Generating the simulation using the values generated from Sim 1b
SimInter2b &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub2b), sigma=s2b, data=X3b)</code></pre>
<pre class="r"><code>SCurve1b
plot(SCurve1b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-31-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 24.00% (20.32, 27.99) - 600 rows
##     150: 39.00% (34.70, 43.43) - 900 rows
##     200: 46.80% (42.36, 51.28) - 1200 rows
##     250: 57.00% (52.53, 61.39) - 1500 rows
##     300: 64.40% (60.03, 68.60) - 1800 rows
##     400: 77.60% (73.69, 81.18) - 2400 rows
##     500: 86.20% (82.86, 89.10) - 3000 rows
## 
## Time elapsed: 0 h 22 m 8 s</code></pre>
<pre class="r"><code>SCurve2b
plot(SCurve2b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-33-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 52.00% (47.52, 56.46) - 600 rows
##     150: 68.20% (63.92, 72.26) - 900 rows
##     200: 78.00% (74.11, 81.56) - 1200 rows
##     250: 90.60% (87.70, 93.01) - 1500 rows
##     300: 95.60% (93.41, 97.22) - 1800 rows
##     400: 99.00% (97.68, 99.67) - 2400 rows
##     500: 99.80% (98.89, 99.99) - 3000 rows
## 
## Time elapsed: 0 h 21 m 3 s</code></pre>
<p><br/><br/><br/><br/></p>
</div>
</div>
<div id="the-study-goes-to-hell" class="section level1">
<h1>The Study Goes to Hell</h1>
<div id="simulation-6" class="section level2">
<h2>Simulation 6</h2>
<p>In my final model (M6), I use all of the parameter settings that decrease a priori power. Specifically, I set the correlation between my predictors to be 0.80, and I set my residual variance to be 0.55 by setting my random intercept term at 0.20, my random slope term at 0.20, and the variance attributed to the correlation between my random slope and intercept at 0.05. The parameters of M6 are unlikely because they assume that the fixed effects in my study are not predictive of trust, that participants will view their best friend’s strength and weakness as equivalently relevant across goals, and that the residual variance will account for 55% of the random variance (as opposed to the average level of trust between participants, the slope between goal importance and trust between participants, and the correlation between these two random terms). Therefore, this model’s estimate represents a lower bound on my expected power.</p>
<pre class="r"><code>#################################################################################
################################# Simulation 3 ##################################
###  Setting weak predictor, high residuals, and strong positive correlation  ###
#################################################################################

# Generating the simulation
SimInter3 &lt;- makeLmer(DV ~ impcat+relstrength+relweak+impcat:relstrength+impcat:relweak +(1+impcat|Subject), 
                      fixef=b1, VarCorr=list(Sub2b), sigma=s2b, data=X3c)</code></pre>
<pre class="r"><code>SCurve3
plot(SCurve3)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-36-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relstrength&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 14.00% (11.08, 17.35) - 600 rows
##     150: 20.40% (16.95, 24.20) - 900 rows
##     200: 26.20% (22.40, 30.29) - 1200 rows
##     250: 30.40% (26.39, 34.64) - 1500 rows
##     300: 35.40% (31.21, 39.77) - 1800 rows
##     400: 45.00% (40.58, 49.48) - 2400 rows
##     500: 52.00% (47.52, 56.46) - 3000 rows
## 
## Time elapsed: 0 h 21 m 46 s</code></pre>
<pre class="r"><code>SCurve3b
plot(SCurve3b)</code></pre>
<p><img src="simulation_files/figure-html/unnamed-chunk-38-1.png" width="312" style="display: block; margin: auto;" /></p>
<pre><code>## Power for predictor &#39;impcat:relweak&#39;, (95% confidence interval),
## by largest value of Subject:
##     100: 29.40% (25.44, 33.61) - 600 rows
##     150: 38.00% (33.73, 42.42) - 900 rows
##     200: 44.00% (39.60, 48.48) - 1200 rows
##     250: 58.80% (54.34, 63.15) - 1500 rows
##     300: 63.80% (59.42, 68.02) - 1800 rows
##     400: 75.80% (71.80, 79.49) - 2400 rows
##     500: 85.60% (82.21, 88.56) - 3000 rows
## 
## Time elapsed: 0 h 20 m 44 s</code></pre>
</div>
</div>
<div id="graphing-power-across-simulations" class="section level1">
<h1>Graphing Power Across Simulations</h1>
<p>After looking at the results from all of the simulations, it seemed as though a sample size of 400 balanced a priopri statistical power with the pragmatics of data collection. Here’s the expected power at N = 400 for the interaction between the relevance to strength and importance across all 6 simulations. <img src="simulation_files/figure-html/unnamed-chunk-40-1.png" width="312" style="display: block; margin: auto;" /></p>
<p>And here’s the expected power at N = 400 for the interaction between the relevance to weakness and importance across all 6 simulations. <img src="simulation_files/figure-html/unnamed-chunk-41-1.png" width="312" style="display: block; margin: auto;" /></p>
<p>Notice the second interaction has more power at pretty much every simulation? That’s because we set the interaction including the relevance to weakness to be <em>b</em> = -0.15 whereas we set the interaction including the relevance to strength to be <em>b</em> = +0.10. That 5/100 increase made a huge difference!</p>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogJ1NpbXVsYXRpbmcgQW4gUk0gU3R1ZHknDQpvdXRwdXQ6DQogIGh0bWxfZG9jdW1lbnQ6DQogICAgY29kZV9kb3dubG9hZDogeWVzDQogICAgZm9udHNpemU6IDhwdA0KICAgIGhpZ2hsaWdodDogdGV4dG1hdGUNCiAgICBudW1iZXJfc2VjdGlvbnM6IG5vDQogICAgdGhlbWU6IGNvc21vDQogICAgdG9jOiB5ZXMNCiAgICB0b2NfZmxvYXQ6DQogICAgICBjb2xsYXBzZWQ6IG5vDQotLS0NCg0KYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9DQprbml0cjo6b3B0c19jaHVuayRzZXQoY2FjaGUgPSBUUlVFKQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KG1lc3NhZ2UgPSBGQUxTRSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldCh3YXJuaW5nID0gIEZBTFNFKQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGZpZy53aWR0aD0zLjI1KQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGZpZy5oZWlnaHQ9Mi43NSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldChmaWcuYWxpZ249J2NlbnRlcicpIA0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KHJlc3VsdHM9J2hvbGQnKSANCmBgYA0KDQpgYGB7ciwgZWNobz1GQUxTRSwgd2FybmluZz1GQUxTRX0NCnNldHdkKCJDOi9Vc2Vycy90Y2Fyc2UyL0RvY3VtZW50cy9HaXRIdWIvVGltX0NhcnNlbC5naXRodWIuaW8iKQ0KbGlicmFyeShrbml0cikNCmxpYnJhcnkoa2FibGVFeHRyYSkNCmxpYnJhcnkoc2ltcikNCmxpYnJhcnkodGlkeXIpDQpsaWJyYXJ5KGdncGxvdDIpDQpsaWJyYXJ5KGVmZmVjdHMpDQpsaWJyYXJ5KG12dG5vcm0pDQpsaWJyYXJ5KGJlZXByKQ0KbGlicmFyeShlZmZlY3RzKQ0KbGlicmFyeShNdU1JbikNCmBgYA0KDQoNClN0YXRpc3RpY2FsIHBvd2VyIGlzIGEgdHJpY2t5IGFuZCBvY2Nhc2lvbmFsbHkgY29uZnVzaW5nIHRoaW5nLiBEZWZpbmVkIGFzIHRoZSBwcm9iYWJpbGl0eSBvZiByZWplY3RpbmcgYSBmYWxzZSBudWxsIGh5cG90aGVzaXMsIHN0YXRpc3RpY2FsIHBvd2VyIGlzIGEgZnVuY3Rpb24gb2YgdGhlIHNpemUgb2YgdGhlIGVmZmVjdCBvZiBpbnRlcmVzdCwgdGhlIHNpemUgb2YgdGhlIHNhbXBsZSwgYW5kIHRoZSBhbHBoYSBjdXQtb2ZmLiANCg0KRm9yIHNpbXBsZSBkZXNpZ25zLCBzdWNoIGFzIGEgKnQqLXRlc3QsIGRldGVybWluaW5nIHRoZSBwb3dlciBvZiBhIHN0dWR5IGlzIHJlbGF0aXZlbHkgc3RyYWlnaHRmb3J3YXJkOiBJZGVudGlmeSB0aGUgYXJlYSBvZiB0aGUgY29tcGFyaXNvbiBkaXN0cmlidXRpb24gdGhhdCBsaWVzIGJleW9uZCB0aGUgY3V0LXBvaW50IGRlZmluZWQgYnkgYWxwaGEuIEhvd2V2ZXIsIGZvciBtb3JlIGNvbXBsaWNhdGVkIGRlc2lnbnMsIGxpa2UgdGhvc2UgaW52b2x2aW5nIHJlcGVhdGVkIG1lYXN1cmVzLCBkZXRlcm1pbmluZyB0aGUgcG93ZXIgb2YgYSBzdHVkeSBpcyBtdWNoIG1vcmUgY29udm9sdXRlZC4gT2Z0ZW50aW1lcywgaXQgaXMgbmVjZXNzYXJ5IHRvIHJlcGVhdGVkbHkgc2ltdWxhdGUgdGhlIGV4cGVjdGVkIHJlc3VsdHMgb2YgdGhlIHN0dWR5IHVuZGVyIGEgdmFyaWV0eSBvZiBjb25kaXRpb25zLiANCg0KQmVsb3csIEkgd2FsayB5b3UgdGhyb3VnaCB0aGUgc2ltdWxhdGlvbnMgYW5kIHBvd2VyIGFuYWx5c2VzIGZvciBteSBkaXNzZXJ0YXRpb24uDQo8YnIvPjxici8+PGJyLz48YnIvPg0KDQoNCg0KDQojIE92ZXJ2aWV3IG9mIFZhcmlhYmxlcw0KSGVyZSBpcyB0aGUgbGlzdCBvZiB2YXJpYWJsZXMgd2Ugd2lsbCBzaW11bGF0ZToNCg0KKiBDcml0ZXJpb24NCiAgKyBHb2FsLVNwZWNpZmljIFRydXN0ICg2IG1lYXN1cmVtZW50cyBmb3IgZWFjaCBwYXJ0aWNpcGFudCkNCiogUHJlZGljdG9ycw0KICArIFJlbGV2YW5jZSBvZiBiZXN0IGZyaWVuZCdzIHN0cmVuZ3RoIHRvIHRoZSBnb2FsICg2IG1lYXN1cmVtZW50cyBmb3IgZWFjaCBwYXJ0aWNpcGFudCkNCiAgKyBSZWxldmFuY2Ugb2YgYmVzdCBmcmllbmQncyB3ZWFrbmVzcyB0byB0aGUgZ29hbCAoNiBtZWFzdXJlbWVudHMgZm9yIGVhY2ggcGFydGljaXBhbnQpDQogICsgQ2F0ZWdvcmljYWwgTWVhc3VyZSBvZiBHb2FsIGltcG9ydGFuY2Ugb2YgNiBHb2FscyAoMiBsZXZlbHM6IE1vc3QgSW1wb3J0YW50LCBMZWFzdCBJbXBvcnRhbnQpDQo8YnIvPjxici8+PGJyLz48YnIvPg0KDQoNCg0KDQojIFNldHRpbmcgdGhlIEluaXRpYWwgVmFsdWVzDQpGb3Igb3VyIHNpbXVsYXRpb25zLCB3ZSB3aWxsIG5lZWQgdG8gY3JlYXRlIGEgc2FtcGxlIG9mIGdlbmVyYXRlZCBkYXRhLiBUaGluayBvZiB0aGVzZSBhcyBjb21wdXRlciBwZW9wbGUgd2hvIHdpbGwgYWN0IGluIHRoZSB3YXkgd2UgdGVsbCB0aGVtIHRvLiBUaGVzZSB2YWx1ZXMgc3RheSB0aGUgc2FtZSB0aHJvdWdob3V0IGFsbCBvZiB0aGUgc2ltdWxhdGlvbnMgZXhjZXB0IHdoZXJlIGV4cGxpY2l0bHkgbWVudGlvbmVkLg0KYGBge3J9DQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBTZXR0aW5nIHRoZSBzZWVkIHNvIHRoaXMgaXMgdGhlIHNhbWUgZXZlcnl0aW1lICAgICAgICMNCnNldC5zZWVkKDEwMTAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojIFNldHRpbmcgdGhlIG51bWJlciBvZiBzdWJqZWN0cyB0byBiZSA1ayAgICAgICAgICAgICAgIw0KbjE9NTAwMCAjIE1ha2UgYW4gZXZlbiBudW1iZXIgICAgICAgICAgICAgICAgICAgICAgICAgICMNCiMgQ3JlYXRpbmcgYSBzdWJqZWN0IElEIG51bWJlciAgICAgICAgICAgICAgICAgICAgICAgICAjICAgICAgICAgICAgICAgICANClN1YmplY3QxID0gcmVwKDE6bjEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojIENyZWF0aW5nIHRoZSBudW1iZXIgb2YgcmVwZWF0ZWQgbWVhc3VyZXMgICAgICAgICAgICAgIw0KU2Vzc2lvbnMxID0gcmVwKDE6NikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMNCiMgQ3JlYXRlcyBSTSBkZXNpZ24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIA0KWDEgPC0gZXhwYW5kLmdyaWQoU2Vzc2lvbnM9U2Vzc2lvbnMxLFN1YmplY3Q9U3ViamVjdDEpICMNCiMgQWRkIGNvdmFyaWF0ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQppbXBjYXQ8LXJlcChjKC0uNSwuNSksbjEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KWDI8LWRhdGEuZnJhbWUoaW1wY2F0PWltcGNhdCxYMSkgICAgICAgICAgICAgICAgICAgICAgICMNCiMgU2V0dGluZyBleHRyZW1lbHkgd2VhayByZWxhdGlvbnNoaXBzICAgICAgICAgICAgICAgICAjDQpiMSA8LSBjKDAsMCwuMDUsLS4wNSwuMSwtLjE1KSAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmBgYA0KDQotIEluIHRoZSBjb2RlIGFib3ZlLCB3ZSBjcmVhdGVkIGEgc2FtcGxlIG9mIDUwMDAgc3ViamVjdHMgKFNzKSB3aG8gZWFjaCBoYXZlIDYgbWVhc3VyZW1lbnRzIG9mIHRoZSBjcml0ZXJpb24gdmFyaWFibGUuIA0KLSBUaGVuLCB3ZSBhZGRlZCBhIHdpdGhpbi1zdWJqZWN0cyBjb3ZhcmlhdGUuIEluIHRoZSBjYXNlIG9mIG15IGRpc3NlcnRhdGlvbiwgSSBpbmNsdWRlZCBhIGNhdGVnb3JpY2FsIG1lYXN1cmUgb2YgZ29hbCBpbXBvcnRhbmNlIChNb3N0IEltcG9ydGFudCwgTGVhc3QgSW1wb3J0YW50KSB0byBpbmNsdWRlIGluIHRoZSByYW5kb20gc3RydWN0dXJlIG9mIHRoZSBtdWx0aWxldmVsIG1vZGVsLiANCi0gRmluYWxseSwgSSBpbml0aWFsaXplZCB0aGUgYmV0YSB2YWx1ZXMgZm9yIG15IGV2ZW50dWFsIG1vZGVsLCBzdGFydGluZyB3aXRoIHRoZSBpbnRlcmNlcHQsIG1vdmluZyB0aHJvdWdoIHRoZSBtYWluIGVmZmVjdHMsIGFuZCBlbmRpbmcgd2l0aCB0d28sIHR3by13YXkgaW50ZXJhY3Rpb25zLiANCg0KQXMgeW91IGNhbiBzZWUsIG90aGVyIHRoYW4gdGhlIGxhc3QgaW50ZXJhY3Rpb24sIEkgc2V0IG15IGV4cGVjdGVkIGJldGFzIHRvIGJlIHByZXR0eSB3ZWFrLiBUaGlzIGFsbG93ZWQgbWUgdG8gaGF2ZSBhIGNvbnNlcnZhdGl2ZSBlc3RpbWF0ZSBvZiBhIHByaW9yaSBwb3dlci4NCjxici8+PGJyLz48YnIvPjxici8+DQoNCg0KIyBDaGFuZ2luZyBQcmVkaWN0b3IgQ29ycmVsYXRpb25zDQpUaGUgZGVncmVlIHRvIHdoaWNoIGEgc2V0IG9mIHByZWRpY3RvcnMgY292YXJ5IGFmZmVjdHMgeW91ciBhYmlsaXR5IHRvIHJlamVjdCBhIGZhbHNlIG51bGwgaHlwb3RoZXNpcyAoaS5lLiwgaXQgYWZmZWN0cyB5b3VyIHBvd2VyKS4gSW4gdGhlc2UgZmlyc3QgdGhyZWUgc2ltdWxhdGlvbnMsIEkgYW0gZ29pbmcgdG8gY2hhbmdlIHRoZSBjb3JyZWxhdGlvbiBhbW9uZyBteSBwcmVkaWN0b3JzIGluIGEgcHJpbmNpcGxlZCB3YXkgYW5kIG9ic2VydmUgaG93IHRoYXQgYWZmZWN0cyBteSBwb3dlci4NCjxici8+PGJyLz48YnIvPg0KDQojIyBTaW11bGF0aW9uIDENCkluIHRoaXMgZmlyc3Qgc2ltdWxhdGlvbiwgSSB3aWxsIHNldCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgcmVsZXZhbmNlIG9mIHRoZSBiZXN0IGZyaWVuZCdzIHN0cmVuZ3RoIHRvIHRoZSBnb2FsIChoZXJlYWZ0ZXIgcmVmZXJyZWQgdG8gYXMgcmVsZXZhbmNlIG9mIHN0cmVuZ3RoKSBhbmQgdGhlIHJlbGV2YW5jZSBvZiB0aGUgYmVzdCBmcmllbmQncyB3ZWFrbmVzcyB0byB0aGUgZ29hbCAoaGVhcmVhZnRlciByZWZlcnJlZCB0byBhcyByZWxldmFuY2UgdG8gd2Vha25lc3MpIHRvIGJlIHdlYWsgYW5kIG5lZ2F0aXZlLg0KDQpJZiBwZW9wbGUgdmlldyBvdGhlcnMgYXQgbGVhc3QgaW1wbGljaXRseSBhcyBhIHBvdGVudGlhbCBtZWFucyB0byBnb2FsIHB1cnN1aXQgKE9yZWhlayBldCBhbC4sIDIwMTgpLCB0aGVuIHRoZXkgbWF5IGRpZmZlcmVudGlhdGUgdGhlaXIgYmVzdCBmcmllbmTigJlzIHN0cmVuZ3RocyBhbmQgd2Vha25lc3NlcyBhY3Jvc3MgZ29hbHMuIEluIG90aGVyIHdvcmRzLCBpdCBpcyBwb3NzaWJsZSB0aGF0IHBlb3BsZSB3aWxsIHZpZXcgdGhlaXIgZnJpZW5k4oCZcyBzdHJlbmd0aHMgYW5kIHdlYWtuZXNzZXMgYXMgcmVsZXZhbnQgdG8gZGlmZmVyZW50IGdvYWwgY29udGV4dHMuIFRoZXJlZm9yZSwgaW4gbGluZSB3aXRoIHRoaXMgcmVhc29uaW5nLCBJIHNldCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgcHJlZGljdG9ycyBpbiB0aGlzIGZpcnN0IHNpbXVsYXRpb24gdG8gYmUgd2VhayBhbmQgbmVnYXRpdmUgKC0wLjEwKS4NCg0KYGBge3J9DQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFNpbXVsYXRpb24gMSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMgIFNldHRpbmcgd2VhayBwcmVkaWN0b3IgYW5kIGNoYW5naW5nIGNvcnJlbGF0aW9ucyAgIyMjDQojIyMjIyMjIyMjIENvcnJlbGF0aW9uIGJldHdlZW4gcHJlZGljdG9ycyA9IC0uMSAjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIFNldHRpbmcgd2VhayBuZWdhdGl2ZQ0Kc2lnbWEgPC0gbWF0cml4KGMoMSwtLjEsDQogICAgICAgICAgICAgICAgLS4xLCAgMSksIG5jb2w9MikNCg0KIyBDcmVhdGluZyBwcmVkaWN0b3JzDQp4IDwtIHJtdm5vcm0obj1uMSwgbWVhbj1jKDAsMCksIHNpZ21hPXNpZ21hKQ0KDQpyZWxzdHJlbmd0aDwteFssMV0NCnJlbHdlYWs8LXhbLDJdDQojIENoZWNraW5nIGNvcnJlbGF0aW9uIGJldHdlZW4gcHJlZGljdG9ycw0KY29yKHgpDQpgYGANCmBgYHtyfQ0KIyBDcmVhdGluZyBkYXRhZnJhbWUNClgzPC1kYXRhLmZyYW1lKHJlbHN0cmVuZ3RoPXJlbHN0cmVuZ3RoLHJlbHdlYWs9cmVsd2VhayxYMikNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMgU2ltdWxhdGlvbiAxYSAjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBSYW5kb20gaW50ZXJjZXB0IGFuZCByYW5kb20gc2xvcGUgb2YgaW1wb3J0YW5jZQ0KU3ViIDwtZGlhZyhjKC42LC4yKSkNCg0KIyBTZXR0aW5nIGNvdiBiZXR3ZWVuIHNsb3BlIGFuZCBpbnRlcmNlcHQNClN1Yltsb3dlci50cmkoU3ViKV0gPC0gLjA1DQoNCiMgU2V0dGluZyByZXNpZHVhbCB2YXJpYW5jZQ0KcyA8LSAoMS0oc3VtKFN1YikpKV4uNSANCiMgQ2hlY2tpbmcNCnMgIyBSZXNpZHVhbCBzMj0uMTUgDQpgYGANCg0KDQpMZXQncyBjaGVjayB0byBtYWtlIHN1cmUgdGhlIG11bHRpcGxlIFJeMiBvZiB0aGUgbW9kZWwgbWFrZXMgc2Vuc2UuDQpgYGB7cn0NCiMgRmluaXNoIFRyaWFuZ2xlIGZvciByYW5kb20gaXRlbXMNClN1Ylt1cHBlci50cmkoU3ViKV0gPC0gLjA1DQoNCiMgR2VuZXJhdGluZyB0aGUgc2ltdWxhdGlvbg0KU2ltSW50ZXIxIDwtIG1ha2VMbWVyKERWIH4gaW1wY2F0K3JlbHN0cmVuZ3RoK3JlbHdlYWsraW1wY2F0OnJlbHN0cmVuZ3RoK2ltcGNhdDpyZWx3ZWFrICsoMStpbXBjYXR8U3ViamVjdCksIA0KICAgICAgICAgICAgICAgICAgICAgIGZpeGVmPWIxLCBWYXJDb3JyPWxpc3QoU3ViKSwgc2lnbWE9cywgZGF0YT1YMykNCg0KI0NoZWNrIHNpbQ0Kc3VtbWFyeShTaW1JbnRlcjEpDQoNCiMgQ2hlY2sgUjIgLSBleHRyYWN0IG9uZSBtb2RlbCBmaXQNClRlc3QuRGF0YTwtZ2V0RGF0YShTaW1JbnRlcjEpDQoNCiMgQ2hlY2tpbmcgdGhlIGZpeGVkIFIyIGZvciB0aGUgcHJlZGljdG9yDQpSMi50ZXN0PC1yLnNxdWFyZWRHTE1NKFNpbUludGVyMSkNClIyLnRlc3RbLDFdICMgMS43JQ0KYGBgDQoNCg0KSGVyZSdzIHRoZSBlZmZlY3Qgc2l6ZSBpbiBSaG8uDQpgYGB7cn0NCiMgUmhvDQpSMi50ZXN0WywxXV4uNQ0KYGBgDQoNCg0KQW5kIGluIENvaGVuJ3MgKmQqLg0KYGBge3J9DQojIENvaGVuJ3MgZCANCmQ9ICgyKlIyLnRlc3RbLDFdXi41KSAvICgxLVIyLnRlc3RbLDFdKV4uNQ0KZCAjIC4yNw0KYGBgDQoNCg0KTm93LCBsZXQncyBleHRyYWN0IG9uZSBzYW1wbGUgb2YgdGhlIHNpbXVsYXRpb24gYW5kIHJ1biBvdXIgYW5hbHlzaXMgb24gaXQgdG8gZW5zdXJlIGl0J3Mgd29ya2luZyBwcm9wZXJseS4NCmBgYHtyfQ0KIyBFeHRyYWN0aW5nIHRlc3QgZGF0YSB0byBydW4gc2FtcGxlIHByaW1hcnkgYW5hbHlzaXMNClRlc3QuRGF0YTwtZ2V0RGF0YShTaW1JbnRlcjEpDQoNCiMgU2FtcGxlIHByaW1hcnkgYW5hbHlzaXMNClQxPC1sbWVyKERWIH4gaW1wY2F0K3JlbHN0cmVuZ3RoK3JlbHdlYWsraW1wY2F0OnJlbHN0cmVuZ3RoK2ltcGNhdDpyZWx3ZWFrICsoMStpbXBjYXR8U3ViamVjdCksDQogICAgICAgICBkYXRhPVRlc3QuRGF0YSwgUkVNTD1GKQ0Kc3VtbWFyeShUMSkNCmBgYA0KWWVwLiBUaGF0IHdlbnQgdGhlIHdheSB3ZSBleHBlY3RlZCBpdCENCg0KDQpIZXJlJ3MgdGhlIGV4cGVjdGVkIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHRoZSByZWxldmFuY2UgdG8gc3RyZW5ndGggYW5kIGltcG9ydGFuY2Ugb24gaW50ZXJwZXJzb25hbCB0cnVzdC4NCmBgYHtyLCAsIGVjaG89RkFMU0UsIG91dC53aWR0aD0nLjQ5XFxsaW5ld2lkdGgnLCBmaWcud2lkdGg9Mi4yNSwgZmlnLmhlaWdodD0yLjUsZmlnLnNob3c9J2hvbGQnLGZpZy5hbGlnbj0nY2VudGVyJ30NCiMgUGxvdHRpbmcgaW50ZXJhY3Rpb24gYmV0d2VlbiBpbXBvcnRhbmNlIGFuZCB0aGUgcmVsZXZhbmNlIG9mIHRoZSBmcmllbmQncyBzdHJlbmd0aCB0byB0aGUgZ29hbA0KRmluYWwuRml4ZWQ8LWVmZmVjdChjKCJpbXBjYXQqcmVsc3RyZW5ndGgiKSwgVDEsDQogICAgICAgICAgICAgICAgICAgIHhsZXZlbHM9bGlzdChpbXBjYXQ9YygtLjUsKy41KSwNCiAgICAgICAgICAgICAgICAgICAgcmVsc3RyZW5ndGg9c2VxKC0yLCsyLC41KSkpDQoNCiMgQ29udmVydGluZyB0byBkYXRhZnJhbWUNCkZpbmFsLkZpeGVkPC1hcy5kYXRhLmZyYW1lKEZpbmFsLkZpeGVkKQ0KIyBSZWNvZGluZyBhcyBmYWN0b3INCkZpbmFsLkZpeGVkJGltcGNhdEY8LWFzLmZhY3RvcihGaW5hbC5GaXhlZCRpbXBjYXQpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIFBsb3R0aW5nIFByaW1hcnkgQW5hbHlzaXM6IFJlbFN0cmVuZ3RoKkltcG9ydGFuY2UgIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCkZpbmFsLkZpeGVkLlBsb3QgPC1nZ3Bsb3QoZGF0YSA9IEZpbmFsLkZpeGVkLCBhZXMoeCA9IHJlbHN0cmVuZ3RoLCB5ID1maXQsIGdyb3VwPWltcGNhdEYpKSsNCiAgZ2VvbV9saW5lKGFlcyhjb2xvcj1pbXBjYXRGKSwgc2l6ZT0yKSsNCiAgZ2VvbV9yaWJib24oYWVzKHltaW49Zml0LXNlLCB5bWF4PWZpdCtzZSxmaWxsPWltcGNhdEYpLGFscGhhPS4yKSsNCiAgeGxhYigiUmVsZXZhbmNlIHRvIFN0cmVuZ3RoIikrDQogIHlsYWIoIlRydXN0IikrDQogIHNjYWxlX2NvbG9yX21hbnVhbCh2YWx1ZXM9YygiYmx1ZSIsICJyZWQiKSkrDQogIHNjYWxlX2ZpbGxfbWFudWFsKHZhbHVlcz1jKCJibHVlIiwgInJlZCIpKSsNCiAgdGhlbWVfYncoKSsNCiAgdGhlbWUodGV4dD1lbGVtZW50X3RleHQoZmFjZT0iYm9sZCIsIHNpemU9MTIpLA0KICAgICAgICBwYW5lbC5ncmlkLm1ham9yID0gZWxlbWVudF9ibGFuaygpLCANCiAgICAgICAgcGFuZWwuZ3JpZC5taW5vciA9IGVsZW1lbnRfYmxhbmsoKSwgDQogICAgICAgIHBhbmVsLmJvcmRlciA9IGVsZW1lbnRfcmVjdChmaWxsID0gTkEsIGNvbG91ciA9ICJOQSIpLA0KICAgICAgICBheGlzLmxpbmUgPSBlbGVtZW50X2xpbmUoc2l6ZSA9IDEsIGNvbG91ciA9ICJncmV5ODAiKSwNCiAgICAgICAgbGVnZW5kLnRpdGxlPWVsZW1lbnRfYmxhbmsoKSwNCiAgICAgICAgbGVnZW5kLnBvc2l0aW9uID0gYyguMiwgLjkyKSkNCkZpbmFsLkZpeGVkLlBsb3QNCmBgYA0KDQoNCkhlcmUncyB0aGUgZXhwZWN0ZWQgcG93ZXIgYXQgTiA9IDEwMCwgMTUwLCAyMDAsIDI1MCwgMzAwLCA0MDAsIGFuZCA1MDAgZm9yIHRoZSBpbnRlcmFjdGlvbi4NCmBgYHtyLGVjaG89RkFMU0UscmVzdWx0cz0iaGlkZSJ9DQojIyMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgUmVsU3RyZW5ndGggSW50ZXJhY3Rpb24gMSAjIyMNClNDdXJ2ZTE8LXBvd2VyQ3VydmUoU2ltSW50ZXIxLCBmaXhlZCgiaW1wY2F0OnJlbHN0cmVuZ3RoIiwgImxyIiksDQogICAgICAgICAgICAgICAgICAgIGFsb25nID0gIlN1YmplY3QiLA0KICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKDEwMCwxNTAsMjAwLDI1MCwzMDAsNDAwLDUwMCksDQogICAgICAgICAgICAgICAgICAgIG5zaW09NTAwLGFscGhhPS4wNDUsIHByb2dyZXNzPVRSVUUpDQpgYGANCg0KDQoNCmBgYHtyfQ0KU0N1cnZlMQ0KcGxvdChTQ3VydmUxKQ0KYGBgDQoNCg0KDQpBbmQgaGVyZSdzIHRoZSBleHBlY3RlZCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgcmVsZXZhbmNlIHRvIHdlYWtuZXNzIGFuZCBpbXBvcnRhbmNlIG9uIGludGVycGVyc29uYWwgdHJ1c3QuDQpgYGB7ciwgLCBlY2hvPUZBTFNFLCBvdXQud2lkdGg9Jy40OVxcbGluZXdpZHRoJywgZmlnLndpZHRoPTIuMjUsIGZpZy5oZWlnaHQ9Mi41LGZpZy5zaG93PSdob2xkJyxmaWcuYWxpZ249J2NlbnRlcid9DQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIFBsb3R0aW5nIFByaW1hcnkgQW5hbHlzaXM6IFJlbFdlYWsqSW1wb3J0YW5jZSAjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpGaW5hbC5GaXhlZDI8LWVmZmVjdChjKCJpbXBjYXQqcmVsd2VhayIpLCBUMSwNCiAgICAgICAgICAgICAgICAgICAgIHhsZXZlbHM9bGlzdChpbXBjYXQ9YygtLjUsKy41KSwNCiAgICAgICAgICAgICAgICAgICAgIHJlbHdlYWs9c2VxKC0yLCsyLC41KSkpDQoNCiMgQ29udmVydGluZyB0byBhIGRhdGFmcmFtZQ0KRmluYWwuRml4ZWQyPC1hcy5kYXRhLmZyYW1lKEZpbmFsLkZpeGVkMikNCiMgUmVjb2RpbmcgYXMgZmFjdG9yDQpGaW5hbC5GaXhlZDIkaW1wY2F0RjwtYXMuZmFjdG9yKEZpbmFsLkZpeGVkMiRpbXBjYXQpDQoNCiMgUGxvdHRpbmcNCkZpbmFsLkZpeGVkLlBsb3QyIDwtZ2dwbG90KGRhdGEgPSBGaW5hbC5GaXhlZDIsIGFlcyh4ID0gcmVsd2VhaywgeSA9Zml0LCBncm91cD1pbXBjYXRGKSkrDQogIGdlb21fbGluZShhZXMoY29sb3I9aW1wY2F0RiksIHNpemU9MikrDQogIGdlb21fcmliYm9uKGFlcyh5bWluPWZpdC1zZSwgeW1heD1maXQrc2UsZmlsbD1pbXBjYXRGKSxhbHBoYT0uMikrDQogIHhsYWIoIlJlbGV2YW5jZSB0byBXZWFrbmVzcyIpKw0KICB5bGFiKCJUcnVzdCIpKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzPWMoImJsdWUiLCAicmVkIikpKw0KICBzY2FsZV9maWxsX21hbnVhbCh2YWx1ZXM9YygiYmx1ZSIsICJyZWQiKSkrDQogIHRoZW1lX2J3KCkrDQogIHRoZW1lKHRleHQ9ZWxlbWVudF90ZXh0KGZhY2U9ImJvbGQiLCBzaXplPTEyKSwNCiAgICAgICAgcGFuZWwuZ3JpZC5tYWpvciA9IGVsZW1lbnRfYmxhbmsoKSwgDQogICAgICAgIHBhbmVsLmdyaWQubWlub3IgPSBlbGVtZW50X2JsYW5rKCksIA0KICAgICAgICBwYW5lbC5ib3JkZXIgPSBlbGVtZW50X3JlY3QoZmlsbCA9IE5BLCBjb2xvdXIgPSAiTkEiKSwNCiAgICAgICAgYXhpcy5saW5lID0gZWxlbWVudF9saW5lKHNpemUgPSAxLCBjb2xvdXIgPSAiZ3JleTgwIiksDQogICAgICAgIGxlZ2VuZC50aXRsZT1lbGVtZW50X2JsYW5rKCksDQogICAgICAgIGxlZ2VuZC5wb3NpdGlvbiA9IGMoLjIsIC45MikpDQpGaW5hbC5GaXhlZC5QbG90Mg0KYGBgDQoNCg0KDQpIZXJlJ3MgdGhlIGV4cGVjdGVkIHBvd2VyIGF0IE4gPSAxMDAsIDE1MCwgMjAwLCAyNTAsIDMwMCwgNDAwLCBhbmQgNTAwIGZvciB0aGUgaW50ZXJhY3Rpb24uDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFdlYWsgSW50ZXJhY3Rpb24gMSAjIyMNClNDdXJ2ZTI8LXBvd2VyQ3VydmUoU2ltSW50ZXIxLCBmaXhlZCgiaW1wY2F0OnJlbHdlYWsiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgIGFsb25nID0gIlN1YmplY3QiLA0KICAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUyDQpwbG90KFNDdXJ2ZTIpDQoNCmBgYA0KPGJyLz48YnIvPjxici8+DQoNCg0KIyMgU2ltdWxhdGlvbiAyDQpJbiBjb250cmFzdCB0byB0aGUgcG90ZW50aWFsIHNpdHVhdGlvbiBqdXN0IGNoYXJhY3Rlcml6ZWQsIHdoZXJlYnkgcGVvcGxlIHdlcmUgZXhwZWN0ZWQgdG8gdmlldyB0aGVpciBmcmllbmTigJlzIHN0cmVuZ3RocyBhbmQgd2Vha25lc3NlcyBhcyB3ZWFrbHkgYW5kIG5lZ2F0aXZlIHJlbGF0ZWQsIHRoZSBuZXh0IHNpbXVsYXRpb24gZXN0aW1hdGVzIHRoZSBlZmZlY3Qgb2YgZnJpZW5kIGF0dHJpYnV0ZXPigJkgZ29hbCByZWxldmFuY2UgYmVpbmcgcG9zaXRpdmUgY29ycmVsYXRlZC4gSW4gdGhlIHN0dWR54oCZcyBkZXNpZ24sIHBhcnRpY2lwYW50cyB3ZXJlIGZpcnN0IGFza2VkIHRvIGlkZW50aWZ5IGFuZCBkZXNjcmliZSB0aGVpciBwZXJzb25hbCBwcm9qZWN0cyBhbmQgdGhlbiB0byBpZGVudGlmeSBhbmQgZGVzY3JpYmUgdGhlaXIgYmVzdCBmcmllbmQuIFRoZXJlZm9yZSwgdGhlIG1ldGhvZHMgcHJlc3NlZCBmb3IgcGFydGljaXBhbnRzIHRvIGltYWdpbmUgdGhlaXIgcGVyc29uYWwgcHJvamVjdHMsIGZyZWUgZnJvbSB3aG9tIHRoZXkgbWF5IGNob29zZSB0byByZWx5IHVwb24uIENvbnNlcXVlbnRseSwgaXQgc2VlbWVkIHBvc3NpYmxlIHRoYXQgdGhlIHNhbWUgY29uc3RlbGxhdGlvbiBvZiBmcmllbmQgYXR0cmlidXRlcyBtYXkgYmUgcGVyY2VpdmVkIGFzIGJvdGggYSBzdHJlbmd0aCBhbmQgYSB3ZWFrbmVzcyBhbmQgcmVsZXZhbnQgdG8gc2ltaWxhciBzaXR1YXRpb25zLiBGb3IgZXhhbXBsZSwgcGVyaGFwcyBUaW0gYmVsaWV2ZXMgdGhhdCBBbmR5IGlzIGEg4oCcZnJlZSBzcGlyaXQu4oCdIENvbnNlcXVlbnRseSwgaGUgbWF5IGJlbGlldmUgdGhhdCBBbmR54oCZcyBiaWdnZXN0IHN0cmVuZ3RoIGlzIHRoYXQgaGUgaXMgZ29vZCBhdCBnZW5lcmF0aW5nIG5vdmVsIHNvbHV0aW9ucyB0byBwcm9ibGVtcywgYnV0IFRpbSBtYXkgYmVsaWV2ZSBBbmR54oCZcyBncmVhdGVzdCB3ZWFrbmVzcyBpcyB0aGF0IGhlIGlzIHVucmVsaWFibGUuIFRvIG1vZGVsIHRoaXMgcG90ZW50aWFsIG91dGNvbWUgaW4gU2ltdWxhdGlvbiAyLCBJIHNldCBhIG1vZGVyYXRlIGFuZCBwb3NpdGl2ZSAoMC40MCkgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgcmVsZXZhbmNlIG9mIHRoZSBiZXN0IGZyaWVuZHPigJkgc3RyZW5ndGhzIGFuZCB3ZWFrbmVzc2VzIHRvIHRoZSBnb2FsLg0KDQoNCmBgYHtyfQ0KIyBSZXNldHRpbmcgc2VlZA0Kc2V0LnNlZWQoMTAxMDEpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIFNpbXVsYXRpb24gMWIgIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMgU2V0dGluZyBzdHJvbmcgcG9zaXRpdmUgcmVsYXRpb25zaGlwIGJldHdlZW4gcHJlZGljdG9ycw0KIyMgdG8gY29udHJvbCBmb3IgcG90ZW50aWFsIGVmZmVjdCBvZiBjb2xsaW5lYXJpdHkgb24gcG93ZXINCnNpZ21hMWIgPC0gbWF0cml4KGMoMSwuNCwNCiAgICAgICAgICAgICAgICAgIC40ICwxKSwgbmNvbD0yKQ0KIyBDcmVhdGluZyBwcmVkaWN0b3JzDQp4MmIgPC0gcm12bm9ybShuPW4xLCBtZWFuPWMoMCwwKSwgc2lnbWE9c2lnbWExYikNCg0KIyBDcmVhdGluZyBuZXcgcHJlZGljdG9ycyB3aXRoIHN0cm9uZyBwb3NpdGl2ZSBjb3JyZWxhdGlvbg0KcmVsc3RyZW5ndGgxYjwteDJiWywxXQ0KcmVsd2VhazFiPC14MmJbLDJdDQoNCiMgQ3JlYXRpbmcgbmV3IGRhdGFmcmFtZQ0KWDNiPC1kYXRhLmZyYW1lKHJlbHN0cmVuZ3RoPXJlbHN0cmVuZ3RoMWIscmVsd2Vhaz1yZWx3ZWFrMWIsWDIpDQoNCiMgR2VuZXJhdGVzIHRoZSBzaW11bGF0aW9uDQpTaW1JbnRlcjFiIDwtIG1ha2VMbWVyKERWIH4gaW1wY2F0K3JlbHN0cmVuZ3RoK3JlbHdlYWsraW1wY2F0OnJlbHN0cmVuZ3RoK2ltcGNhdDpyZWx3ZWFrICsoMStpbXBjYXR8U3ViamVjdCksIA0KICAgICAgICAgICAgICAgICAgICAgIGZpeGVmPWIxLCBWYXJDb3JyPWxpc3QoU3ViKSwgc2lnbWE9cywgZGF0YT1YM2IpDQoNCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxTdHJlbmd0aCBJbnRlcmFjdGlvbiAxYiAjIyMNClNDdXJ2ZTFiPC1wb3dlckN1cnZlKFNpbUludGVyMWIsIGZpeGVkKCJpbXBjYXQ6cmVsc3RyZW5ndGgiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUxYg0KcGxvdChTQ3VydmUxYikNCmBgYA0KDQoNCmBgYHtyLGVjaG89RkFMU0UscmVzdWx0cz0iaGlkZSJ9DQojIyMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgUmVsU3RyZW5ndGggSW50ZXJhY3Rpb24gMWIgIyMjDQpTQ3VydmUyYjwtcG93ZXJDdXJ2ZShTaW1JbnRlcjFiLCBmaXhlZCgiaW1wY2F0OnJlbHdlYWsiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgIGFsb25nID0gIlN1YmplY3QiLA0KICAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUyYg0KcGxvdChTQ3VydmUyYikNCg0KYGBgDQo8YnIvPjxici8+PGJyLz4NCg0KDQoNCiMjIFNpbXVsYXRpb24gMw0KSW4gU2ltdWxhdGlvbiAzLCBJIHNldCBhIHN0cm9uZyBhbmQgcG9zaXRpdmUgKDAuODApIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHJlbGV2YW5jZSBvZiB0aGUgYmVzdCBmcmllbmRz4oCZIHN0cmVuZ3RocyBhbmQgd2Vha25lc3NlcyB0byB0aGUgZ29hbC4gVGhpcyB3b3VsZCBiZSBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8sIG5vdCBzaW1wbHkgYmVjYXVzZSBvZiBtdWx0aWNvbGxpbmVhcml0eSBpc3N1ZXMgYnV0IGJlY2F1c2UgbXkgcHJlZGljdGlvbnMgdGhlIGVmZmVjdCBvZiB0aGUgcmVsZXZhbmNlIHRvIHN0cmVuZ3RoIGFuZCByZWxldmFuY2UgdG8gd2Vha25lc3Mgb24gdHJ1c3Qgd2VyZSBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9ucy4gQ29uc2VxdWVudGx5LCBpZiBTaW11bGF0aW9uIDMgd2FzIHRydWUsIHRoZW4gbXkgaHlwb3RoZXNlcyB3b3VsZCBjZXJ0YWlubHkgbm90IGJlIHN1cHBvcnRlZC4NCg0KYGBge3J9DQpzZXQuc2VlZCgxMDEwMSkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMgU2ltdWxhdGlvbiAxYyAjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBTZXR0aW5nIHZlcnkgc3Ryb25nIHBvc2l0aXZlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHByZWRpY3RvcnMNCnNpZ21hMWMgPC0gbWF0cml4KGMoMSwuOCwNCiAgICAgICAgICAgICAgICAgICAuOCwgMSksIG5jb2w9MikNCiMgQ3JlYXRpbmcgbmV3IHByZWRpY3RvcnMNCngyYyA8LSBybXZub3JtKG49bjEsIG1lYW49YygwLDApLCBzaWdtYT1zaWdtYTFjKQ0KcmVsc3RyZW5ndGgxYzwteDJjWywxXQ0KcmVsd2VhazFjPC14MmNbLDJdDQoNCiMgQ3JlYXRlIGRhdGFmcmFtZQ0KWDNjPC1kYXRhLmZyYW1lKHJlbHN0cmVuZ3RoPXJlbHN0cmVuZ3RoMWMscmVsd2Vhaz1yZWx3ZWFrMWMsWDIpDQoNCg0KIyBHZW5lcmF0ZXMgdGhlIHNpbXVsYXRpb24NClNpbUludGVyMWMgPC0gbWFrZUxtZXIoRFYgfiBpbXBjYXQrcmVsc3RyZW5ndGgrcmVsd2VhaytpbXBjYXQ6cmVsc3RyZW5ndGgraW1wY2F0OnJlbHdlYWsgKygxK2ltcGNhdHxTdWJqZWN0KSwgDQogICAgICAgICAgICAgICAgICAgICAgZml4ZWY9YjEsIFZhckNvcnI9bGlzdChTdWIpLCBzaWdtYT1zLCBkYXRhPVgzYykNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgcmVsc3RyZW5ndGgNClNDdXJ2ZTFjPC1wb3dlckN1cnZlKFNpbUludGVyMWMsIGZpeGVkKCJpbXBjYXQ6cmVsc3RyZW5ndGgiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUxYw0KcGxvdChTQ3VydmUxYykNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgcmVsd2Vha25lc3MNClNDdXJ2ZTJDPC1wb3dlckN1cnZlKFNpbUludGVyMWMsIGZpeGVkKCJpbXBjYXQ6cmVsd2VhayIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKDEwMCwxNTAsMjAwLDI1MCwzMDAsNDAwLDUwMCksDQogICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTJDDQpwbG90KFNDdXJ2ZTJDKQ0KYGBgDQo8YnIvPjxici8+PGJyLz48YnIvPg0KDQoNCg0KDQojIEluY3JlYXNpbmcgdGhlIFJlc2lkdWFsIFZhcmlhbmNlDQpUaGUgc2Vjb25kIHR3byBzaW11bGF0aW9ucyAoTTQsIE01KSBtb2RlbGVkIHRoZSBlZmZlY3Qgb2YgaW5jcmVhc2luZyB0aGUgcmVzaWR1YWwgdmFyaWFuY2UgaW4gdGhlIG1vZGVscyBvbiBhIHByaW9yaSBwb3dlci4gU3BlY2lmaWNhbGx5LCB0aGUgdG90YWwgcmFuZG9tIHZhcmlhbmNlIHdhcyBzZXQgdG8gMSBhbmQgd2FzIGFsbG9jYXRlZCBiZXR3ZWVuIHRoZSB2YXJpYW5jZSBhdHRyaWJ1dGVkIHRvIHRoZSByYW5kb20gaW50ZXJjZXB0LCB0aGUgcmFuZG9tIHNsb3BlLCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgcmFuZG9tIGludGVyY2VwdCBhbmQgdGhlIHNsb3BlLCBhbmQgdGhlIHJlc2lkdWFsLiBJbiB0aGUgZmlyc3QgdGhyZWUgbW9kZWxzIGEgbGFyZ2UgcHJvcG9ydGlvbiBvZiB0aGUgdmFyaWFuY2Ugd2FzIGF0dHJpYnV0ZWQgdG8gdGhlIHJhbmRvbSBpbnRlcmNlcHQgKDAuNjApLCBmb2xsb3dlZCBieSB0aGUgcmFuZG9tIHNsb3BlICgwLjIwKSwgdGhlIHJlc2lkdWFsICgwLjE1KSwgYW5kIHRoZSBjb3JyZWxhdGlvbiBiZXR3ZWVuIHRoZSByYW5kb20gaW50ZXJjZXB0IGFuZCB0aGUgc2xvcGUgKDAuMDUpLiBUaGlzIHNwZWNpZmljYXRpb24gYXNzdW1lcyB0aGF0IG11Y2ggb2YgdGhlIHZhcmlhYmlsaXR5IGluIHRydXN0IGlzIGF0dHJpYnV0YWJsZSB0byB0aGUgaW5kaXZpZHVhbOKAmXMgZ2VuZXJhbCBsZXZlbCBvZiB0cnVzdCBmb3IgdGhlaXIgYmVzdCBmcmllbmQuIEluIG90aGVyIHdvcmRzLCB0aGVzZSBtb2RlbHMgYWNjb3VudCBmb3IgdGhlIGZhY3QgdGhhdCBwZW9wbGUgcmVhbGx5IGRvIHRlbmQgdG8gdHJ1c3QgYXQgdmFyeWluZyBsZXZlbHMgKGUuZy4sIFJvdHRlciwgMTk4MCkuDQo8YnIvPjxici8+PGJyLz4NCg0KDQoNCiMjIFNpbXVsYXRpb24gNA0KSW4gTTQsIHRoZSBhbW91bnQgb2YgdmFyaWFuY2UgYXR0cmlidXRlZCB0byB0aGUgcmFuZG9tIGludGVyY2VwdCB3YXMgZGVjcmVhc2VkIHRvIDAuNDAuIEJlY2F1c2UgdGhlIHJhbmRvbSBpbnRlcmNlcHQgd2FzIGFsbG9jYXRlZCBtb3N0IG9mIHRoZSByYW5kb20gdmFyaWFuY2UsIGl0IHdhcyB0aGUgZWFzaWVzdCB0ZXJtIHRvIHJlZHVjZSB3aGlsZSBlbnN1cmluZyBpbnRlcnByZXRhYmlsaXR5IGJldHdlZW4gcHJldmlvdXMgbW9kZWxzLiBNb3Jlb3ZlciwgaXTigJlzIGluaXRpYWwgc2V0dGluZyByZXByZXNlbnRlZCB0aGUgbW9yZSB1bnJlYWxpc3RpYyBwYXJhbWV0ZXIgc2V0dGluZyBiZWNhdXNlIGl0IGFzc3VtZWQgNjAlIG9mIHRoZSByYW5kb20gdmFyaWFuY2Ugd2FzIGF0dHJpYnV0YWJsZSB0byBhdmVyYWdlIGxldmVscyBvZiB0cnVzdCBiZXR3ZWVuIGluZGl2aWR1YWxzLiBUaGUgcmVzdWx0IG9mIHRoaXMgY2hhbmdlIHdhcyB0aGF0IHRoZSByZXNpZHVhbCB2YXJpYW5jZSB3YXMgaW5jcmVhc2VkIGZyb20gMC4xNSB0byAwLjM1IGZvciBNNC4NCg0KYGBge3J9DQpzZXQuc2VlZCgxMDEwMSkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMgU2ltdWxhdGlvbiAyYSAjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBEZWNyZWFzaW5nIHZhcmlhbmNlIG9mIHJhbmRvbSBpbnRlcmNlcHQgYW5kIHJhbm1kb20gc2xvcGUgb2YgaW1wb3J0YW5jZSB0byBpbmNyZWFzZSByZXNpZHVhbHMNClN1YjIgPC1kaWFnKGMoLjQsLjIpKQ0KDQojIFNldHRpbmcgY292IGJldHdlZW4gc2xvcGUgYW5kIGludGVyY2VwdA0KU3ViMltsb3dlci50cmkoU3ViKV0gPC0gLjA1DQoNCiMgU2V0dGluZyByZXNpZHVhbCBzZA0KczIgPC0gKDEtKHN1bShTdWIyKSkpXi41IA0KDQojIEZpbmlzaCBUcmlhbmdsZSBmb3IgcmFuZG9tIGl0ZW1zDQpTdWIyW3VwcGVyLnRyaShTdWIyKV0gPC0gLjA1DQoNCiMgR2VuZXJhdGluZyB0aGUgc2ltdWxhdGlvbiB1c2luZyB0aGUgdmFsdWVzIGdlbmVyYXRlZCBmcm9tIFNpbSAxIHdpdGggaW5jcmVhc2VkIHJlc2lkdWFscw0KU2ltSW50ZXIyIDwtIG1ha2VMbWVyKERWIH4gaW1wY2F0K3JlbHN0cmVuZ3RoK3JlbHdlYWsraW1wY2F0OnJlbHN0cmVuZ3RoK2ltcGNhdDpyZWx3ZWFrICsoMStpbXBjYXR8U3ViamVjdCksIA0KICAgICAgICAgICAgICAgICAgICAgIGZpeGVmPWIxLCBWYXJDb3JyPWxpc3QoU3ViMiksIHNpZ21hPXMyLCBkYXRhPVgzYikNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxTdHJlbmd0aCBJbnRlcmFjdGlvbiAyICMjIw0KU0N1cnZlMTwtcG93ZXJDdXJ2ZShTaW1JbnRlcjIsIGZpeGVkKCJpbXBjYXQ6cmVsc3RyZW5ndGgiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUxDQpwbG90KFNDdXJ2ZTEpDQpgYGANCg0KDQoNCmBgYHtyLGVjaG89RkFMU0UscmVzdWx0cz0iaGlkZSJ9DQojIyMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgUmVsV2VhayBJbnRlcmFjdGlvbiAxICMjIw0KU0N1cnZlMjwtcG93ZXJDdXJ2ZShTaW1JbnRlcjIsIGZpeGVkKCJpbXBjYXQ6cmVsd2VhayIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKDEwMCwxNTAsMjAwLDI1MCwzMDAsNDAwLDUwMCksDQogICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTINCnBsb3QoU0N1cnZlMikNCg0KYGBgDQo8YnIvPjxici8+PGJyLz4NCg0KDQoNCiMjIFNpbXVsYXRpb24gNQ0KSW4gTTUsIEkgZnVydGhlciByZWR1Y2VkIHRoZSBhbW91bnQgb2YgdmFyaWFuY2UgYXR0cmlidXRhYmxlIHRvIHRoZSByYW5kb20gaW50ZXJjZXB0IHRvIDAuMjAuIFRoaXMgbW9kZWwgYXNzdW1lcyB0aGF0IHRoZSBtYWpvcml0eSBvZiB0aGUgcmFuZG9tIHZhcmlhbmNlIGlzIGF0dHJpYnV0YWJsZSB0byB0aGUgcmVzaWR1YWwgYW5kIGlzIHRoZXJlZm9yZSBsZWZ0IHVucHJlZGljdGVkICgwLjU1KS4gSG93ZXZlciwgdGhlIHJhbmRvbSBpbnRlcmNlcHQgaXMga2VwdCBhcyBvbmUgb2YgdGhlIG1vc3QgcHJlZGljdGl2ZSBzcGVjaWZpZWQgdGVybSBpbiB0aGUgcmFuZG9tIHN0cnVjdHVyZSwgYnV0IGluIE01IGl0IGlzIGFzc3VtZWQgdG8gYmUgZXF1aXZhbGVudCB0byB0aGUgcmFuZG9tIHNsb3BlIGJldHdlZW4gZ29hbCBpbXBvcnRhbmNlIGFuZCB0cnVzdC4NCg0KYGBge3J9DQpzZXQuc2VlZCgxMDEwMSkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMgU2ltdWxhdGlvbiAyYiAjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyBEZWNyZWFzaW5nIHZhcmlhbmNlIG9mIHJhbmRvbSBpbnRlcmNlcHQgYW5kIHJhbm1kb20gc2xvcGUgb2YgaW1wb3J0YW5jZSB0byBpbmNyZWFzZSByZXNpZHVhbHMNClN1YjJiIDwtZGlhZyhjKC4yLC4yKSkNCg0KIyBTZXR0aW5nIGNvdiBiZXR3ZWVuIHNsb3BlIGFuZCBpbnRlcmNlcHQNClN1YjJiW2xvd2VyLnRyaShTdWIpXSA8LSAuMDUNCg0KIyBTZXR0aW5nIHJlc2lkdWFsIHNkDQpzMmIgPC0gKDEtKHN1bShTdWIyYikpKV4uNSANCiMgRmluaXNoIFRyaWFuZ2xlIGZvciByYW5kb20gaXRlbXMNClN1YjJiW3VwcGVyLnRyaShTdWIyYildIDwtIC4wNQ0KDQojIEdlbmVyYXRpbmcgdGhlIHNpbXVsYXRpb24gdXNpbmcgdGhlIHZhbHVlcyBnZW5lcmF0ZWQgZnJvbSBTaW0gMWINClNpbUludGVyMmIgPC0gbWFrZUxtZXIoRFYgfiBpbXBjYXQrcmVsc3RyZW5ndGgrcmVsd2VhaytpbXBjYXQ6cmVsc3RyZW5ndGgraW1wY2F0OnJlbHdlYWsgKygxK2ltcGNhdHxTdWJqZWN0KSwgDQogICAgICAgICAgICAgICAgICAgICAgZml4ZWY9YjEsIFZhckNvcnI9bGlzdChTdWIyYiksIHNpZ21hPXMyYiwgZGF0YT1YM2IpDQpgYGANCg0KDQoNCmBgYHtyLGVjaG89RkFMU0UscmVzdWx0cz0iaGlkZSJ9DQojIyMgUG93ZXIgc2ltdWxhdGlvbiBmb3IgUmVsU3RyZW5ndGggSW50ZXJhY3Rpb24gMiAjIyMNClNDdXJ2ZTFiPC1wb3dlckN1cnZlKFNpbUludGVyMmIsIGZpeGVkKCJpbXBjYXQ6cmVsc3RyZW5ndGgiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUxYg0KcGxvdChTQ3VydmUxYikNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxXZWFrIEludGVyYWN0aW9uIDEgIyMjDQpTQ3VydmUyYjwtcG93ZXJDdXJ2ZShTaW1JbnRlcjJiLCBmaXhlZCgiaW1wY2F0OnJlbHdlYWsiLCAibHIiKSwNCiAgICAgICAgICAgICAgICAgICAgYWxvbmcgPSAiU3ViamVjdCIsDQogICAgICAgICAgICAgICAgICAgIGJyZWFrcyA9IGMoMTAwLDE1MCwyMDAsMjUwLDMwMCw0MDAsNTAwKSwNCiAgICAgICAgICAgICAgICAgICAgbnNpbT01MDAsYWxwaGE9LjA0NSwgcHJvZ3Jlc3M9VFJVRSkNCmBgYA0KDQoNCg0KYGBge3J9DQpTQ3VydmUyYg0KcGxvdChTQ3VydmUyYikNCmBgYA0KPGJyLz48YnIvPjxici8+PGJyLz4NCg0KDQoNCg0KIyBUaGUgU3R1ZHkgR29lcyB0byBIZWxsDQoNCiMjIFNpbXVsYXRpb24gNg0KSW4gbXkgZmluYWwgbW9kZWwgKE02KSwgSSB1c2UgYWxsIG9mIHRoZSBwYXJhbWV0ZXIgc2V0dGluZ3MgdGhhdCBkZWNyZWFzZSBhIHByaW9yaSBwb3dlci4gU3BlY2lmaWNhbGx5LCBJIHNldCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiBteSBwcmVkaWN0b3JzIHRvIGJlIDAuODAsIGFuZCBJIHNldCBteSByZXNpZHVhbCB2YXJpYW5jZSB0byBiZSAwLjU1IGJ5IHNldHRpbmcgbXkgcmFuZG9tIGludGVyY2VwdCB0ZXJtIGF0IDAuMjAsIG15IHJhbmRvbSBzbG9wZSB0ZXJtIGF0IDAuMjAsIGFuZCB0aGUgdmFyaWFuY2UgYXR0cmlidXRlZCB0byB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiBteSByYW5kb20gc2xvcGUgYW5kIGludGVyY2VwdCBhdCAwLjA1LiBUaGUgcGFyYW1ldGVycyBvZiBNNiBhcmUgdW5saWtlbHkgYmVjYXVzZSB0aGV5IGFzc3VtZSB0aGF0IHRoZSBmaXhlZCBlZmZlY3RzIGluIG15IHN0dWR5IGFyZSBub3QgcHJlZGljdGl2ZSBvZiB0cnVzdCwgdGhhdCBwYXJ0aWNpcGFudHMgd2lsbCB2aWV3IHRoZWlyIGJlc3QgZnJpZW5k4oCZcyBzdHJlbmd0aCBhbmQgd2Vha25lc3MgYXMgZXF1aXZhbGVudGx5IHJlbGV2YW50IGFjcm9zcyBnb2FscywgYW5kIHRoYXQgdGhlIHJlc2lkdWFsIHZhcmlhbmNlIHdpbGwgYWNjb3VudCBmb3IgNTUlIG9mIHRoZSByYW5kb20gdmFyaWFuY2UgKGFzIG9wcG9zZWQgdG8gdGhlIGF2ZXJhZ2UgbGV2ZWwgb2YgdHJ1c3QgYmV0d2VlbiBwYXJ0aWNpcGFudHMsIHRoZSBzbG9wZSBiZXR3ZWVuIGdvYWwgaW1wb3J0YW5jZSBhbmQgdHJ1c3QgYmV0d2VlbiBwYXJ0aWNpcGFudHMsIGFuZCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGVzZSB0d28gcmFuZG9tIHRlcm1zKS4gVGhlcmVmb3JlLCB0aGlzIG1vZGVs4oCZcyBlc3RpbWF0ZSByZXByZXNlbnRzIGEgbG93ZXIgYm91bmQgb24gbXkgZXhwZWN0ZWQgcG93ZXIuDQoNCmBgYHtyfQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgU2ltdWxhdGlvbiAzICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyAgU2V0dGluZyB3ZWFrIHByZWRpY3RvciwgaGlnaCByZXNpZHVhbHMsIGFuZCBzdHJvbmcgcG9zaXRpdmUgY29ycmVsYXRpb24gICMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiMgR2VuZXJhdGluZyB0aGUgc2ltdWxhdGlvbg0KU2ltSW50ZXIzIDwtIG1ha2VMbWVyKERWIH4gaW1wY2F0K3JlbHN0cmVuZ3RoK3JlbHdlYWsraW1wY2F0OnJlbHN0cmVuZ3RoK2ltcGNhdDpyZWx3ZWFrICsoMStpbXBjYXR8U3ViamVjdCksIA0KICAgICAgICAgICAgICAgICAgICAgIGZpeGVmPWIxLCBWYXJDb3JyPWxpc3QoU3ViMmIpLCBzaWdtYT1zMmIsIGRhdGE9WDNjKQ0KYGBgDQoNCg0KDQpgYGB7cixlY2hvPUZBTFNFLHJlc3VsdHM9ImhpZGUifQ0KIyMjIFBvd2VyIHNpbXVsYXRpb24gZm9yIFJlbFN0cmVuZ3RoIEludGVyYWN0aW9uIDEgIyMjDQpTQ3VydmUzPC1wb3dlckN1cnZlKFNpbUludGVyMywgZml4ZWQoImltcGNhdDpyZWxzdHJlbmd0aCIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTMNCnBsb3QoU0N1cnZlMykNCmBgYA0KDQoNCg0KYGBge3IsZWNobz1GQUxTRSxyZXN1bHRzPSJoaWRlIn0NCiMjIyBQb3dlciBzaW11bGF0aW9uIGZvciBSZWxXZWFrIEludGVyYWN0aW9uIDEgIyMjDQpTQ3VydmUzYjwtcG93ZXJDdXJ2ZShTaW1JbnRlcjMsIGZpeGVkKCJpbXBjYXQ6cmVsd2VhayIsICJsciIpLA0KICAgICAgICAgICAgICAgICAgICBhbG9uZyA9ICJTdWJqZWN0IiwNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtzID0gYygxMDAsMTUwLDIwMCwyNTAsMzAwLDQwMCw1MDApLA0KICAgICAgICAgICAgICAgICAgICBuc2ltPTUwMCxhbHBoYT0uMDQ1LCBwcm9ncmVzcz1UUlVFKQ0KYGBgDQoNCg0KDQpgYGB7cn0NClNDdXJ2ZTNiDQpwbG90KFNDdXJ2ZTNiKQ0KYGBgDQoNCg0KIyBHcmFwaGluZyBQb3dlciBBY3Jvc3MgU2ltdWxhdGlvbnMNCmBgYHtyLGVjaG89RkFMU0V9DQpQb3dlcjQwMFM8LWMoMTAwLCAxMDAsIDg4LjgsIDkyLjQsIDgwLjIsIDQ1KQ0KUG93ZXI0MDB3PC1jKDEwMCwgMTAwLCA5OS44LCAxMDAsIDk4LjQsIDc4KQ0KYGBgDQoNCkFmdGVyIGxvb2tpbmcgYXQgdGhlIHJlc3VsdHMgZnJvbSBhbGwgb2YgdGhlIHNpbXVsYXRpb25zLCBpdCBzZWVtZWQgYXMgdGhvdWdoIGEgc2FtcGxlIHNpemUgb2YgNDAwIGJhbGFuY2VkIGEgcHJpb3ByaSBzdGF0aXN0aWNhbCBwb3dlciB3aXRoIHRoZSBwcmFnbWF0aWNzIG9mIGRhdGEgY29sbGVjdGlvbi4gSGVyZSdzIHRoZSBleHBlY3RlZCBwb3dlciBhdCBOID0gNDAwIGZvciB0aGUgaW50ZXJhY3Rpb24gYmV0d2VlbiB0aGUgcmVsZXZhbmNlIHRvIHN0cmVuZ3RoIGFuZCBpbXBvcnRhbmNlIGFjcm9zcyBhbGwgNiBzaW11bGF0aW9ucy4NCmBgYHtyLGVjaG89RkFMU0V9DQpwbG90KFBvd2VyNDAwUywgdHlwZT0gImIiLCB4bGFiPSJFeHBlY3RlZCBQb3dlciIsIHlsYWI9IlNpbXVsYXRpb24iKQ0KYGBgDQoNCg0KQW5kIGhlcmUncyB0aGUgZXhwZWN0ZWQgcG93ZXIgYXQgTiA9IDQwMCBmb3IgdGhlIGludGVyYWN0aW9uIGJldHdlZW4gdGhlIHJlbGV2YW5jZSB0byB3ZWFrbmVzcyBhbmQgaW1wb3J0YW5jZSBhY3Jvc3MgYWxsIDYgc2ltdWxhdGlvbnMuDQpgYGB7cixlY2hvPUZBTFNFfQ0KcGxvdChQb3dlcjQwMHcsIHR5cGU9ICJiIiwgeGxhYj0iRXhwZWN0ZWQgUG93ZXIiLCB5bGFiPSJTaW11bGF0aW9uIikNCg0KYGBgDQoNCk5vdGljZSB0aGUgc2Vjb25kIGludGVyYWN0aW9uIGhhcyBtb3JlIHBvd2VyIGF0IHByZXR0eSBtdWNoIGV2ZXJ5IHNpbXVsYXRpb24/IFRoYXQncyBiZWNhdXNlIHdlIHNldCB0aGUgaW50ZXJhY3Rpb24gaW5jbHVkaW5nIHRoZSByZWxldmFuY2UgdG8gd2Vha25lc3MgdG8gYmUgKmIqID0gLTAuMTUgd2hlcmVhcyB3ZSBzZXQgdGhlIGludGVyYWN0aW9uIGluY2x1ZGluZyB0aGUgcmVsZXZhbmNlIHRvIHN0cmVuZ3RoIHRvIGJlICpiKiA9ICswLjEwLiBUaGF0IDUvMTAwIGluY3JlYXNlIG1hZGUgYSBodWdlIGRpZmZlcmVuY2Uh</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("simulation.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
